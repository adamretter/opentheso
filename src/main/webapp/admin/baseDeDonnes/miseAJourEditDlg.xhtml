<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui">

    <p:dialog id="idMiseAJourEditDlg"  header="#{langueBean.getMsg('popup.name')}" widgetVar="miseAJourEditDlg" modal="true" resizable="false" >

            <h:panelGroup rendered="#{user1.haveRights(1)}">
                <fieldset class="fieldPref">
                    <legend><h:outputText value="#{langueBean.getMsg('bdd.act')}"/></legend><br/>

                    <h:form>
                        <p:commandButton id="chercheMaJ" value="Vérifier la mise à jour"  update=":idMiseAJourEditDlg" 
                                         actionListener="#{baseDeDonnes.loadinfoDB()}" oncomplete="PF('miseAJourEditDlg').show()" 
                                         styleClass="styleButton"/>

                        <br/>
                        <br/>

                        <p:commandButton id="passForgeted" value="#{langueBean.getMsg('bdd.act')}" 
                                         actionListener="#{baseDeDonnes.maJBdd}" styleClass="styleButton"/>       
                    </h:form>

                </fieldset>
            </h:panelGroup>        
        
        
        <h:form>
            <p:messages showDetail="true" autoUpdate="true" />

            <p:dataTable value="#{baseDeDonnes.info}" var="u"  reflow="true" rows="3"
                         style="font-family:'Palatino linotype',Times,serif;">
                <f:facet name="header">
                    <h:outputText value="versions" />
                </f:facet>  
                <p:columnGroup type="header">
                    <p:row>
                        <p:column colspan="2" headerText="Versions actuelles"/>
                        <p:column colspan="1" headerText="Derniere"/>
                    </p:row>
                </p:columnGroup>
                <p:column headerText="Opentheso">
                    <h:outputText value="#{u.version_Opentheso}"/>
                </p:column>
                <p:column headerText="Bdd">
                    <h:outputText value="#{u.version_bdd}" />
                </p:column>
                <p:column headerText="Bdd Current">
                    <h:outputText value="#{u.versionBddCurrent}" />
                </p:column>
            </p:dataTable>
            <center>
            <p:commandButton value="ok" update=":idMiseAJourEditDlg"
                             oncomplete="PF('miseAJourEditDlg').hide();" styleClass="styleButton"/>   
            </center>
        </h:form>        
        <!-- POPUP ADD USER FIN --> 
    </p:dialog>
</ui:composition>