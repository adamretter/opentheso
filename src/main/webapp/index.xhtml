<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <h:head>
        <title>
            <h:outputText  value="#{selectedTerme.nom}"/>
        </title>

        <link rel="icon" href="images/icoTheso.jpg" />
        <link rel="stylesheet" type="text/css" href="css/style.css"/>
        <link rel="stylesheet" type="text/css" href="css/menu.css"/>
        <link rel="stylesheet" href="css/jqx.base.css" type="text/css" />
        <!--      <script type="text/javascript" src="javascript/jquery-1.10.2.min.js"></script> -->
        <script type="text/javascript" src="javascript/jqxcore.js"></script>
        <script type="text/javascript" src="javascript/jqxsplitter.js"></script>
        <script type="text/javascript" src="javascript/gettheme.js"></script>
        <script type="text/javascript" src="javascript/jqxscrollbar.js"></script>
        <script type="text/javascript" src="javascript/indexScript.js"></script>
        <script>
            (function (i, s, o, g, r, a, m) {
                i['GoogleAnalyticsObject'] = r;
                i[r] = i[r] || function () {
                    (i[r].q = i[r].q || []).push(arguments)
                }, i[r].l = 1 * new Date();
                a = s.createElement(o),
                        m = s.getElementsByTagName(o)[0];
                a.async = 1;
                a.src = g;
                m.parentNode.insertBefore(a, m)
            })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

            ga('create', 'UA-58798616-3', 'auto');
            ga('send', 'pageview');

        </script>  

    </h:head>
    <!--<h:body style="background-image: url(./images/panda_roue.jpg)">-->
    <!--<h:body style="background-image: url(./images/panda_roue3.jpg)">-->
    <h:body>
        <f:metadata>
            <f:viewParam name="idc" value="#{theso.idCurl}"/>
            <f:viewParam name="idt" value="#{theso.idTurl}"/>
            <f:viewParam name="idg" value="#{theso.idGurl}"/>
            <f:event listener="#{theso.preRenderView}" type="preRenderView"/>
        </f:metadata>

        <p:dialog header="Aide" widgetVar="dlgHelp" modal="true" resizable="false" width="600" rendered="#{(treeBean.browserName != 'agent')}">
            <h1>Gestionnaire de thésaurus</h1>
            <h:outputText value="version :  #{theso.getVersion()}" /><br/>
            Depuis cette page d'accueil, il vous est possible de parcourir le thésaurus.<br/>
            <ul>
                <li>Choisir le thésaurus en haut à gauche de la page (il sera en français par défaut)</li>
                <li>Choisir la langue du thésaurus parmi la liste située au dessus de l'arbre si une autre langue que le français est souhaitée</li>
            </ul>

            La catégorie Orphelins présente dans l'arbre "Thésaurus" regroupe les termes qui ne sont plus rattachés au thésaurus (ils pourront y être réinsérés par la suite).<br/>

            Il est possible d'effectuer une recherche en ouvrant l'onglet <h2>"Recherche"</h2> en dessous de l'arbre du "Thésaurus". Le résultat de la recherche apparaîtra dans l'onglet 
            juste en dessous de ce dernier.<br/><br/>

            Une fois connecté, il est possible de modifier le thésaurus en sélectionnant les termes et en cliquant sur les boutons d'édition 
            (<img src="images/iconeAjouter.jpg" />). Les domaines sont très peu éditables, il est donc préférable de sélectionner un concept
            plus bas dans l'arbre pour avoir accès à toutes les fonctionnalités.<br/><br/>

            La gestion des facettes permet de regrouper par thèmes différents concepts (peu importe leur place dans le thésaurus).
        </p:dialog>  
        <div id="menuHead">
            <ui:include src="logo.xhtml" />
            <ui:include src="connection.xhtml" />

            <h:panelGroup id="panChoixTheso" style="float: left;" >
                <div id="choixTheso">
                    <h:form id="liste1">
                        <table>
                            <tr>
                                <td style="padding-right: 5px;">
                                    <h:outputText value="#{langueBean.getMsg('theso')}" /><br/>
                                    <h:selectOneMenu value="#{theso.thesaurus.id_thesaurus}" class="inputConnect" >
                                        <f:selectItems value="#{theso.arrayTheso}" var="th" itemLabel="#{th.key}" itemValue="#{th.value}" />
                                    </h:selectOneMenu>
                                </td>
                                <td>
                                    <p:commandButton id="cbSelectTheso" value="#{langueBean.getMsg('btnOk')}" actionListener="#{theso.maj()}" 
                                                     update=":panContenu,:accordeonTree,:panChoixTheso,:contenuDroite1,:contenuDroite2,:contenuDroite3,:panelMenu,:footer" 
                                                     styleClass="styleButton" />
                                </td>

                                <!-- CHOIX LANGUE DEBUT -->  
                                <td id="divLangue">
                                    <h:panelGroup id="liste2">
                                        <h:form rendered="#{theso.thesaurus.id_thesaurus != null}" style="float: right;">
                                            <h:selectOneMenu value="#{theso.thesaurus.language}" styleClass="listes">
                                                <f:selectItems value="#{theso.getThisTrad()}" var="t" itemLabel="#{t.french_name}" 
                                                               itemValue="#{t.id_iso639_1}"  />
                                            </h:selectOneMenu>&nbsp;
                                            <p:commandButton id="cbSelectTheso" value="#{langueBean.getMsg('btnOk')}" actionListener="#{theso.update()}" 
                                                             update=":accordeonTree,:panChoixTheso,:panContenu,:contenuDroite1,:contenuDroite2,:contenuDroite3" 
                                                             styleClass="styleButton"/>
                                        </h:form>
                                    </h:panelGroup>
                                </td>
                                <!-- 
                                 <td>
                                     <h:outputText value="#{langueBean.getMsg('theso.langue')}"/>
                                     <h:outputText value="#{theso.thesaurus.language}" />
                                     <br/>
                                 </td>
                                -->
                            </tr>
                        </table>
                    </h:form>
                </div>
            </h:panelGroup>
            <ui:include src="menuAll.xhtml" />
        </div>
        <center>
            <div id="clean" />
            <ui:include src="popUpIndex.xhtml" />
            <ui:include src="historique.xhtml" />
            <ui:include src="conceptPopUp.xhtml" />
            <ui:include src="dialogs/conceptEditDlg.xhtml" />
            <ui:include src="dialogs/notationEditDlg.xhtml" />
            <ui:include src="dialogs/conceptDeprecateDlg.xhtml" />
            <ui:include src="dialogs/conceptFusionDlg.xhtml" />
            <ui:include src="dialogs/conceptFusionValidationDlg.xhtml" />

            <ui:include src="dialogs/branch/sameGroup/conceptMoveBranchDlg.xhtml" />
            <ui:include src="dialogs/branch/sameGroup/conceptMoveBranchFromGroupDlg.xhtml" />
            <ui:include src="dialogs/branch/sameGroup/conceptMoveBranchToGroupDlg.xhtml" />


            <ui:include src="dialogs/branch/otherGroup/moveBranchFromTopTermToConceptOtherGroupDlg.xhtml" />            
            <ui:include src="dialogs/branch/otherGroup/moveBranchToConceptOtherGroupDlg.xhtml" />
            <ui:include src="dialogs/branch/otherGroup/moveBranchToGroupOfOtherGroupDlg.xhtml" />            


            <ui:include src="dialogs/orphan/moveBranchFromOrphanDlg.xhtml" />
            <ui:include src="dialogs/orphan/moveBranchFromOrphanToGroupDlg.xhtml" />
            <ui:include src="dialogs/nt/ntEditDlg.xhtml" />
            <ui:include src="dialogs/bt/addTgDlg.xhtml" />
            <ui:include src="dialogs/bt/addTgOtherGroupDlg.xhtml" />            
            <ui:include src="dialogs/bt/deleteTgDlg.xhtml" />
            <ui:include src="dialogs/group/addGroupDlg.xhtml" />





            <!-- GESTIONNAIRE DEBUT -->  
            <div id="SplitterVertical1">

                <div id="gauche">
                    <p:accordionPanel id="accordeonTree" dynamic="true" cache="true" activeIndex="#{vue.onglet}" rendered="#{(treeBean.browserName != 'agent') }">
                        <p:tab title="#{langueBean.getMsg('theso')}">
                            <!-- navigation rapide par auto-complétion --> 
                            <div id="rapidAccess" align="center" >
                                <h:form >


                                    <p:autoComplete id="nomTerme" value="#{selectedTerme.selectedTermComp}" completeMethod="#{autoComp.completTerm}" var="t1"
                                                    minQueryLength="3" itemLabel="#{t1.termLexicalValue}" itemValue="#{t1}" converter="termConverter"
                                                    a:placeholder="#{langueBean.getMsg('index.search')}" >

                                        <p:ajax event="itemSelect" listener="#{treeBean.majIndexRapidSearch()}" 
                                                update=":accordeonTree,:panContenu,:note,:contenuDroite1,:contenuDroite2,:contenuDroite3, :accordeonTree:panelTree" 
                                                />

                                    </p:autoComplete>

                                    <!-- gestion des domaines ou groupes --> 
                                    <div id="imageEdition">
                                        <h:form id="formAjDom" rendered="#{(user1.user.name != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus) and (theso.getThisTheso() != null)}">
                                            <p:commandButton id="cbAjDom" styleClass="cbEdit" icon="ui-icon-edit" title="Tools"/>
                                            <p:menu style="background: #CEF0C4" overlay="true" trigger="cbAjDom" my="left top" at="left bottom">
                                                <p:menuitem  value="#{langueBean.getMsg('group.add')}" actionListener="#{vue.setSelectedActionDom(1)}" update=":idGroupAddDlg" oncomplete="PF('groupAddDlg').show();" style="font-size: 12px;"/>
                                                <p:menuitem value="#{langueBean.getMsg('tools.regenerateOrphan')}" actionListener="#{vue.setRegenerateOrphan(1)}" update=":panPopUp" style="font-size: 12px;"/>
                                            </p:menu>
                                        </h:form>
                                    </div>
                                </h:form>
                            </div>
                            <!-- navigation rapide par auto-complétion FIN -->  
                            <hr/>
                            <!-- ARBRE DEBUT -->  
                            <div id="divArbreTheso">
                                <h:panelGroup id="panelTree">
                                    <h:form id="form">
                                        <p:tree id="tree" styleClass="styleTree" value="#{treeBean.root}" var="node" dynamic="true" cache="true" 
                                                selectionMode="single"  selection="#{treeBean.selectedNode}" animate="true" >
                                            <p:ajax event="expand" listener="#{treeBean.onNodeExpand}" />  
                                            <p:ajax event="select" 
                                                    update=":panContenu,:contenuDroite1,:contenuDroite2,:contenuDroite3" 
                                                    listener="#{treeBean.onNodeSelect}" />

                                            <p:treeNode type="domaine" expandedIcon="ui-icon ui-icon-domaine-open" 
                                                        collapsedIcon="ui-icon ui-icon-domaine-close">  
                                                <h:outputText value="#{node}"/>  
                                            </p:treeNode>  
                                            <p:treeNode type="dossier" expandedIcon="ui-icon ui-icon-dossier-open" 
                                                        collapsedIcon="ui-icon ui-icon-dossier-close">  
                                                <h:outputText value="#{node}"/>  
                                            </p:treeNode>  
                                            <p:treeNode type="fichier" icon="ui-icon ui-icon-fichier">  
                                                <h:outputText value="#{node}"/>  
                                            </p:treeNode> 
                                            <p:treeNode type="hidden" icon="ui-icon ui-icon-hidden">  
                                                <h:outputText value="#{node}"/>  
                                            </p:treeNode> 
                                            <p:treeNode type="orphan" expandedIcon="ui-icon ui-icon-domaine-open" 
                                                        collapsedIcon="ui-icon ui-icon-domaine-close">  
                                                <h:outputText value="#{node}"/>  
                                            </p:treeNode>
                                        </p:tree>


                                    </h:form>
                                </h:panelGroup>
                            </div>
                            <!-- ARBRE FIN -->  
                        </p:tab>
                        <p:tab title="#{langueBean.getMsg('index.search')}">
                            <!-- TAB RECHERCHE DEBUT -->
                            <div id="recherche" >
                                <h:form rendered="#{theso.thesaurus.id_thesaurus != null}">
                                    <br/>
                                    <table>
                                        <tr>
                                            <td colspan="2">
                                                <h:inputText value="#{search.entry}" a:placeholder="#{langueBean.getMsg('index.search')}" class="inputConnect" style="width: 180px;"  /><br/><br/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="2">
                                                <p:selectOneRadio value="#{search.startByOrContain}"  >
                                                    <f:selectItem itemLabel="#{langueBean.getMsg('index.searchContain')}" itemValue="1" />                                                    
                                                    <f:selectItem itemLabel="#{langueBean.getMsg('index.searchStartBy')}" itemValue="2" />
                                                </p:selectOneRadio><br/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3" align="left">
                                                &nbsp;
                                                <p:selectBooleanCheckbox id="withNote" value="#{search.withNote}" >
                                                    <p:ajax update="onlyNote" listener="#{search.setOnlyNote(false)}"  />
                                                    <p:ajax update="onlyNotation" listener="#{search.setOnlyNotation(false)}"  />
                                                </p:selectBooleanCheckbox>
                                                &nbsp;
                                                <h:outputText value="#{langueBean.getMsg('index.searchWithNote')}"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3" align="left">
                                                &nbsp;
                                                <p:selectBooleanCheckbox id="onlyNote" value="#{search.onlyNote}" >
                                                    <p:ajax update="withNote" listener="#{search.setWithNote(false)}"/>
                                                    <p:ajax update="onlyNotation" listener="#{search.setOnlyNotation(false)}"  />
                                                </p:selectBooleanCheckbox>
                                                &nbsp;
                                                <h:outputText value="#{langueBean.getMsg('index.searchNoteOnly')}"/>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td colspan="3" align="left">
                                                &nbsp;
                                                <p:selectBooleanCheckbox id="onlyNotation" value="#{search.onlyNotation}" >
                                                    <p:ajax update="withNote" listener="#{search.setWithNote(false)}"  />
                                                    <p:ajax update="onlyNote" listener="#{search.setOnlyNote(false)}"  />
                                                </p:selectBooleanCheckbox>
                                                &nbsp;
                                                <h:outputText value="#{langueBean.getMsg('index.searchNotationOnly')}"/>
                                                <br/><br/>
                                            </td>
                                        </tr>                                        
                                        <tr>
                                            <td>
                                                <div align="left">
                                                    <h:outputText value="Objet:"  />
                                                </div>
                                            </td>
                                            <td>
                                                <h:selectOneMenu value="#{search.typeValueSearch}" style="width: 180px;">
                                                    <f:selectItem itemValue="0" itemLabel="#{langueBean.getMsg('term')}" />
                                                    <f:selectItem itemValue="1" itemLabel="Id #{langueBean.getMsg('concept')}"  />
                                                </h:selectOneMenu>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div align="left">
                                                    <h:outputText value="#{langueBean.getMsg('language')}:" /> 
                                                </div>
                                            </td>
                                            <td>
                                                <h:selectOneMenu value="#{search.langue}"  style="width: 180px;">
                                                    <f:selectItems value="#{theso.getTradForSearch()}" var="t" itemLabel="#{t.french_name}" 
                                                                   itemValue="#{t.id_iso639_1}" />
                                                </h:selectOneMenu>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <div align="left">
                                                    <h:outputText value="#{langueBean.getMsg('index.tabSearch2')}:" />
                                                </div>
                                            </td>
                                            <td>
                                                <h:selectOneMenu value="#{search.idGroup}"  style="width: 180px;">
                                                    <f:selectItems value="#{theso.listeDomaine()}"/>
                                                </h:selectOneMenu>
                                            </td>
                                        </tr>
                                        <tr>
                                            <p:selectOneRadio value="#{search.typeSearch}" >
                                                <f:selectItem itemLabel="#{langueBean.getMsg('index.searchOption1')}" itemValue="1" />
                                                <f:selectItem itemLabel="#{langueBean.getMsg('index.searchOption2')}" itemValue="2" />
                                            </p:selectOneRadio><br/>
                                        </tr>
                                        <p:commandButton value="#{langueBean.getMsg('index.goSearch')}" actionListener="#{search.research()}"
                                                         update=":accordeonTree,:panChoixTheso,:panContenu,:contenuDroite1,:contenuDroite2,:contenuDroite3" 
                                                         styleClass="styleButton" />
                                    </table>
                                    <br/>
                                </h:form>
                                <h:outputText rendered="#{theso.thesaurus.id_thesaurus == null}" value="#{langueBean.getMsg('index.noSearch')}" />
                            </div>
                            <!-- TAB RECHERCHE FIN -->
                        </p:tab>
                        <p:tab title="#{langueBean.getMsg('index.searchRes')}">
                            <!-- TAB RESULTAT RECHERCHE DEBUT -->
                            <h:panelGroup id="resultSearch">
                                <h:form id="tableSearch1" rendered="#{search.typeSearch == 1}">
                                    <p:dataTable var="ts" value="#{search.result1}" selectionMode="single" selection="#{selectedTerme.nodeSe}" 
                                                 rowKey="#{ts.idConcept}" scrollable="true" scrollHeight="460"
                                                 emptyMessage="#{langueBean.getMsg('index.noResultSearch')}" styleClass="styleTab" >
                                        <p:ajax event="rowSelect" listener="#{treeBean.majSearch()}" 
                                                update=":accordeonTree,:panContenu,:note,:contenuDroite1,:contenuDroite2,:contenuDroite3" />
                                        <f:facet name="header">
                                            <h:outputText value="#{langueBean.getMsg('index.headerSearch')} - #{search.nbRes}" />
                                        </f:facet>
                                        <p:column headerText="#{langueBean.getMsg('index.tabSearch1')}">
                                            <h:outputText rendered="#{ts.preferredLabel == true}" value="#{ts.lexical_value}" />
                                            <h:panelGroup rendered="#{ts.preferredLabel == false}" >
                                                <i><h:outputText value="#{ts.lexical_value}" /></i>&nbsp;
                                            </h:panelGroup>
                                        </p:column>
                                        <p:column headerText="#{langueBean.getMsg('index.tabSearch2')}" width="60">
                                            <h:outputText value="#{ts.groupLabel}" />
                                        </p:column>
                                        <p:column width="10" style="padding-left: 1px;">
                                            <h:form>
                                                <p:graphicImage id="seeTree" value="images/iconeTree.png" styleClass="hierarchicalSearch" />
                                                <p:tooltip id="toolTipContent" for="seeTree">
                                                    <p:fieldset legend="#{langueBean.getMsg('index.titleTree')}" styleClass="pfFielset" >
                                                        <ui:repeat value="#{search.getHierachi(ts.idConcept)}" var="path" >
                                                            <ui:repeat value="#{path}" var="termeS" >
                                                                <div style="margin-left: #{path.indexOf(termeS)*35}px; margin-top: 4px;">
                                                                    <img src="images/conceptOpen.png" />
                                                                    <h:outputText value="#{search.getNom(termeS)}" />
                                                                </div>
                                                            </ui:repeat>
                                                            <br/>
                                                        </ui:repeat>
                                                    </p:fieldset>
                                                </p:tooltip>
                                            </h:form>
                                        </p:column>
                                    </p:dataTable>
                                </h:form>
                                <h:form id="tableSearch2" rendered="#{search.typeSearch == 2}">
                                    <p:dataTable var="tsp" value="#{search.result2}" selectionMode="single" selection="#{selectedTerme.nodePe}" 
                                                 rowKey="#{tsp.idConcept}" scrollable="true" scrollHeight="460"
                                                 emptyMessage="#{langueBean.getMsg('index.noResultSearch')}" styleClass="styleTab" >
                                        <p:ajax event="rowSelect" listener="#{treeBean.majSearchPermute()}" 
                                                update=":accordeonTree,:panContenu,:note,:contenuDroite1,:contenuDroite2,:contenuDroite3" />
                                        <f:facet name="header">
                                            <h:outputText value="#{langueBean.getMsg('index.headerSearch')} - #{search.nbRes}" />
                                        </f:facet>
                                        <p:column headerText="#{langueBean.getMsg('index.tabSearch1')}">
                                            <h:outputText rendered="#{tsp.firstColumn != '' and tsp.isPreferredTerm == true}" value="#{tsp.firstColumn.trim()}&nbsp;" />
                                            <h:outputText rendered="#{tsp.isPreferredTerm == true}" value="#{tsp.searchedValue}" style="font-weight: bold;" />&nbsp;
                                            <h:outputText rendered="#{tsp.lastColumn != '' and tsp.isPreferredTerm == true}" value="#{tsp.lastColumn.trim()}" />
                                            <h:panelGroup rendered="#{tsp.isPreferredTerm == false}" >
                                                <i>
                                                    <h:outputText rendered="#{tsp.firstColumn != ''}" value="#{tsp.firstColumn.trim()}&nbsp;" />
                                                    <h:outputText value="#{tsp.searchedValue}" style="font-weight: bold;" />&nbsp;
                                                    <h:outputText rendered="#{tsp.lastColumn != ''}" value="#{tsp.lastColumn.trim()}" />
                                                </i>
                                            </h:panelGroup>

                                        </p:column>
                                        <p:column headerText="#{langueBean.getMsg('index.tabSearch2')}" width="60">
                                            <h:outputText value="#{search.getValueGroup(tsp.idGroup)}" />
                                        </p:column>
                                        <p:column width="10" style="padding-left: 1px;">
                                            <h:form>
                                                <p:graphicImage id="seeTreeP" value="images/iconeTree.png" styleClass="hierarchicalSearch" />
                                                <p:tooltip id="toolTipContent" for="seeTreeP">
                                                    <p:fieldset legend="#{langueBean.getMsg('index.titleTree')}" styleClass="pfFielset" >
                                                        <ui:repeat value="#{search.getHierachi(tsp.idConcept)}" var="pathP" >
                                                            <ui:repeat value="#{pathP}" var="termeSP" >
                                                                <div style="margin-left: #{pathP.indexOf(termeSP)*35}px; margin-top: 4px;">
                                                                    <img src="images/conceptOpen.png" />
                                                                    <h:outputText value="#{search.getNom(termeSP)}" />
                                                                </div>
                                                            </ui:repeat>
                                                            <br/>
                                                        </ui:repeat>
                                                    </p:fieldset>
                                                </p:tooltip>
                                            </h:form>
                                        </p:column>
                                    </p:dataTable>
                                </h:form>
                            </h:panelGroup>
                            <!-- TAB RESULTAT RECHERCHE FIN -->
                        </p:tab>
                        <p:tab title="#{langueBean.getMsg('index.underTree')}">
                            <!-- SOUS ARBRE DEBUT -->
                            <div id="imageEdition" style="margin-bottom: 2px; margin-top: 1px; margin-right: 4px; height: 20px;">
                                <h:form id="formAjFacette" rendered="#{(user1.user.name != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus) and (theso.getThisTheso() != null)}">
                                    <p:commandButton id="cbAjFacette" 
                                                     styleClass="cbEdit" icon="ui-icon-edit" 
                                                     actionListener="#{vue.setFacette(true)}"  
                                                     update=":panFacette" />
                                </h:form>
                            </div>
                            <div id="clean" />
                            <h:form>
                                <p:tree id="uTree" value="#{ssTree.root}" var="node" dynamic="true" cache="true" animate="true" 
                                        selectionMode="single"  selection="#{ssTree.selectedNode}" styleClass="styleSSTree" >
                                    <p:ajax event="expand" listener="#{ssTree.onNodeExpand}" />  
                                    <p:ajax event="select" 
                                            update=":panContenu,:contenuDroite1,:contenuDroite2,:contenuDroite3" 
                                            listener="#{ssTree.onNodeSelect}" /> 
                                    <p:treeNode type="dossier" expandedIcon="ui-icon ui-icon-dossier-open" 
                                                collapsedIcon="ui-icon ui-icon-dossier-close">  
                                        <h:outputText value="#{node}"/>  
                                    </p:treeNode>  
                                    <p:treeNode type="facette" icon="ui-icon ui-icon-facette">  
                                        <h:outputText value="(#{node})" style="color: #659123;"/>  
                                    </p:treeNode>
                                    <p:treeNode type="fichier" icon="ui-icon ui-icon-fichier">  
                                        <h:outputText value="#{node}"/>  
                                    </p:treeNode>
                                    <p:treeNode>  
                                        <h:outputText value="#{node}"/>  
                                    </p:treeNode>
                                </p:tree>
                            </h:form>
                        </p:tab>
                        <!-- SOUS ARBRE FIN -->
                    </p:accordionPanel>
                </div>
                <div>
                    <div id="SplitterVertical2">
                        <div id="principale">
                            <!-- CONTENU CENTRAL DEBUT -->  
                            <!-- <div id="contenuPrincipale" style="background-image: url(./images/panda_roue2.jpg)"> -->
                            <!-- <div id="contenuPrincipale" style="background-image: url(./images/panda_roue3.jpg)"> --> 
                            <!-- <div id="contenuPrincipale" style="background-color: #e4dada"> -->              
                            <div id="contenuPrincipale">
                                <h:panelGroup id="panContenu">
                                    <div style="text-align: center">

                                        <h:form  rendered="#{(selectedTerme.type == 1)}" style="float: left; margin-right: 5px;" >
                                            <!-- exporter le Group en SKOS -->
                                            <p:commandButton value="Skos" ajax="false" styleClass="link">
                                                <p:fileDownload  value="#{downloadBean.thisGroupToSkos(selectedTerme.idDomaine, selectedTerme.idTheso)}" />
                                            </p:commandButton>

                                            <!-- exporter le grpup en JsonLd -->
                                            <p:commandButton value="JsonLd" ajax="false" styleClass="link">
                                                <p:fileDownload  value="#{downloadBean.thisGroupToJsonLd(selectedTerme.idDomaine, selectedTerme.idTheso)}" />
                                            </p:commandButton>
                                        </h:form>  

                                        <h:form  rendered="#{(selectedTerme.idC != null)}" style="float: left; margin-right: 5px;" >
                                            <!-- exporter le concept en SKOS -->
                                            <p:commandButton value="Skos" ajax="false" styleClass="link">
                                                <p:fileDownload  value="#{downloadBean.conceptToSkos(selectedTerme.idC, selectedTerme.idTheso)}" />
                                            </p:commandButton>

                                            <!-- exporter le concept en JsonLd -->
                                            <p:commandButton value="JsonLd" ajax="false" styleClass="link">
                                                <p:fileDownload  value="#{downloadBean.conceptToJsonLd(selectedTerme.idC, selectedTerme.idTheso)}" />
                                            </p:commandButton>
                                        </h:form>                 

                                        <h:form rendered="#{(selectedTerme.idC != null) and (user1.user.name != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus) and (selectedTerme.type != 1)}" style="float: left; margin-right: 5px;" >
                                            <!-- exporter la branche en SKOS mode connecté -->
                                            <p:commandButton value="skos_Branch" ajax="false" styleClass="link">
                                                <p:fileDownload  value="#{downloadBean.brancheToSkos(selectedTerme.idC, selectedTerme.idTheso)}" />
                                            </p:commandButton>

                                            <!-- exporter la branche en JsonLd -->
                                            <p:commandButton value="JsonLd_Branch" ajax="false" styleClass="link">
                                                <p:fileDownload  value="#{downloadBean.brancheToJsonLd(selectedTerme.idC, selectedTerme.idTheso)}" />
                                            </p:commandButton>
                                        </h:form>  


                                        <h:form rendered="#{(selectedTerme.idC != null) and (user1.user.name != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus) and (selectedTerme.type == 1)}" 
                                                style="float: left; margin-right: 5px;" >
                                            <!-- exporter la branche en SKOS mode connecté -->
                                            <p:commandButton value="skos_Group" ajax="false" styleClass="link">
                                                <p:fileDownload  value="#{downloadBean.groupToSkos(selectedTerme.idDomaine, selectedTerme.idTheso)}" />
                                            </p:commandButton>

                                            <!-- exporter la branche en JsonLd -->
                                            <p:commandButton value="JsonLd_Group" ajax="false" styleClass="link">
                                                <p:fileDownload  value="#{downloadBean.groupToJsonLd(selectedTerme.idDomaine, selectedTerme.idTheso)}" />
                                            </p:commandButton>
                                        </h:form>




                                        <h:form rendered="#{selectedTerme.status == 'hidden' and (user1.user.name != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus)}" style="float: left;" >
                                            <p:commandButton value="#{langueBean.getMsg('index.btnReacCpt')}" actionListener="#{treeBean.reactivConcept()}"
                                                             update=":accordeonTree,:panContenu,:contenuDroite1,:contenuDroite2,:contenuDroite3" 
                                                             styleClass="styleButtonValid" >
                                            </p:commandButton>
                                            <br/><br/>
                                        </h:form>








                                        <div id="clean" />
                                    </div>

                                    <div id="alignGauche">
                                        <!--TERMES GENERIQUES DEBUT -->
                                        <div id="divGenerale" >
                                            <div class="titreGenerique">
                                                <h:outputText value="#{langueBean.getMsg('index.BT') }" rendered="#{(treeBean.browserName != 'agent')}"/> 
                                                <h:panelGroup id="panFormEditTGen">
                                                    <div id="imageEdition">
                                                        <h:form id="formEditTGen" 
                                                                rendered="#{(user1.user.name != null) and (selectedTerme.idC != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus) and (selectedTerme.status != 'hidden') and (selectedTerme.idDomaine != 'Orphan') and (selectedTerme.type != 1)}">

                                                            <p:commandButton id="dynaButtonTGen" styleClass="cbEdit" icon="ui-icon-edit"/>
                                                            <p:menu style="background: #CEF0C4" overlay="true" trigger="dynaButtonTGen" my="left top" at="left bottom">
                                                                <p:menuitem  rendered="#{(selectedTerme.type != 2)}" value="#{langueBean.getMsg('panel.addBT')}" update=":idAddTgDlg" oncomplete="PF('addTgDlg').show();" style="font-size: 12px;"/>
                                                                <p:menuitem value="#{langueBean.getMsg('panel.delTG')}" update=":idDeleteTgDlg" oncomplete="PF('deleteTgDlg').show();" style="font-size: 12px;"/>
                                                                <p:submenu label="#{langueBean.getMsg('index.subMenu.otherGroup')}" styleClass="cbSeparateMenu">
                                                                    <p:menuitem  rendered="#{(selectedTerme.type != 2)}" value="#{langueBean.getMsg('panel.addBT')}" update=":idAddTgOtherGroupDlg" oncomplete="PF('addTgOtherGroupDlg').show();" style="font-size: 12px;"/>
                                                                </p:submenu>
                                                            </p:menu>
                                                        </h:form>
                                                    </div>
                                                </h:panelGroup>
                                            </div>
                                            <div class="contenuGenerique">
                                                <h:panelGroup id="gene" rendered="#{(treeBean.browserName != 'agent')}">
                                                    <ui:repeat value="#{selectedTerme.termeGenerique}" var="item0">
                                                        <h:form>
                                                            <p:commandButton styleClass="termClick" rendered="#{item0.value != ''}" value="#{item0.value}" escape="false"
                                                                             actionListener="#{treeBean.changeTerme(item0.key, selectedTerme.getTypeSup())}" 
                                                                             update=":accordeonTree,:panContenu,:contenuDroite1,:contenuDroite2,:contenuDroite3" />
                                                            <p:commandButton styleClass="termClick" rendered="#{item0.value == ''}" value="#{item0.key}" escape="false"
                                                                             actionListener="#{treeBean.changeTerme(item0.key, selectedTerme.getTypeSup())}" 
                                                                             update=":accordeonTree,:panContenu,:contenuDroite1,:contenuDroite2,:contenuDroite3" />                                                            
                                                        </h:form>
                                                    </ui:repeat>
                                                </h:panelGroup>
                                            </div>
                                        </div>
                                        <!--TERMES GENERIQUES FIN -->
                                        <!--INFO TERMES DEBUT -->
                                        <div id="divGenerale">


                                            <div class="contenuTerme">
                                                <div id="imageEdition">
                                                    <h:form id="formEditTInfo" rendered="#{(user1.user.name != null) and (selectedTerme.idC != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus) and (selectedTerme.idDomaine != 'Orphan')}">
                                                        <p:commandButton id="cbEditThesoTInfo" styleClass="cbEdit" icon="ui-icon-edit" />
                                                        <p:menu style="background: #CEF0C4" overlay="true" trigger="cbEditThesoTInfo" my="left top" at="left bottom">

                                                            <p:menuitem rendered="#{selectedTerme.status != 'hidden'}" value="#{langueBean.getMsg('btnEdit')}" update=":idConceptEditDlg" oncomplete="PF('conceptEditDlg').show();" style="font-size: 12px;"/>
                                                            <p:menuitem rendered="#{selectedTerme.type != 1}" value="#{langueBean.getMsg('editNotation')}" update=":idNotationEditDlg" oncomplete="PF('notationEditDlg').show();" style="font-size: 12px;"/>
                                                            <p:menuitem rendered="#{selectedTerme.type != 1}" value="#{langueBean.getMsg('index.histo')}" onclick="PF('dlgHisto').show();" style="font-size: 12px;"/>


                                                            <p:menuitem rendered="#{selectedTerme.type != 1 and selectedTerme.status != 'hidden'}" value="#{langueBean.getMsg('index.depreciateCpt')}" onclick="PF('conceptDeprecateDlg').show();" style="font-size: 12px;"/>
                                                            <p:menuitem rendered="#{selectedTerme.type != 1 and selectedTerme.status != 'hidden'}" value="#{langueBean.getMsg('index.fusion')}" onclick="PF('conceptFusionDlg').show();" style="font-size: 12px;"/>

                                                            <p:menuitem rendered="#{selectedTerme.type == 1 and selectedTerme.termesSpecifique.size() == 0}" value="#{langueBean.getMsg('index.delGroup')}" actionListener="#{treeBean.delGroup()}" update=":panContenu,:accordeonTree" style="font-size: 12px;" />


                                                            <p:submenu rendered="#{(selectedTerme.type != 1) }" label="#{langueBean.getMsg('index.subMenu.thisGroup')}" styleClass="cbSeparateMenu">
                                                                <p:menuitem rendered="#{(selectedTerme.type == 3) and (selectedTerme.termeGenerique.size() > 0) }" value="#{langueBean.getMsg('panel.moveBranche')}" update=":idConceptMoveBranchDlg" oncomplete="PF('conceptMoveBranchDlg').show();" style="font-size: 12px;"/>
                                                                <p:menuitem rendered="#{(selectedTerme.type == 2) }" value="#{langueBean.getMsg('panel.moveBrancheFromGroup')}" update=":idConceptMoveBranchFromGroupDlg" oncomplete="PF('conceptMoveBranchFromGroupDlg').show();" style="font-size: 12px;"/>
                                                                <p:menuitem rendered="#{(selectedTerme.type != 2) and (selectedTerme.type != 1) }" value="#{langueBean.getMsg('panel.moveBrancheToGroup')}" update=":idConceptMoveBranchToGroupDlg" oncomplete="PF('conceptMoveBranchToGroupDlg').show();" style="font-size: 12px;"/>
                                                            </p:submenu>
                                                            <p:submenu rendered="#{(selectedTerme.type != 1) }" label="#{langueBean.getMsg('index.subMenu.otherGroup')}" styleClass="cbSeparateMenu">
                                                                <p:menuitem rendered="#{(selectedTerme.type == 3) and (selectedTerme.termeGenerique.size() > 0) }" value="#{langueBean.getMsg('panel.moveBrancheOtherGroup')}" update=":idMoveBranchToConceptOtherGroupDlg" oncomplete="PF('moveBranchToConceptOtherGroupDlg').show();" style="font-size: 12px;"/>
                                                                <p:menuitem rendered="#{(selectedTerme.type == 2) }" value="#{langueBean.getMsg('panel.moveBrancheOtherGroupFromGroup')}" update=":idMoveBranchFromTopTermToConceptOtherGroupDlg" oncomplete="PF('moveBranchFromTopTermToConceptOtherGroupDlg').show();" style="font-size: 12px;"/>
                                                                <p:menuitem rendered="#{(selectedTerme.type != 1) }" value="#{langueBean.getMsg('panel.moveBrancheOtherGroupToGroup')}" update=":idMoveBranchToGroupOfOtherGroupDlg" oncomplete="PF('moveBranchToGroupOfOtherGroupDlg').show();" style="font-size: 12px;"/>
                                                            </p:submenu>

                                                        </p:menu>
                                                    </h:form>
                                                    <!--options pour les orphelins -->
                                                    <h:form id="formEditTInfoOrphan" rendered="#{(user1.user.name != null) and (selectedTerme.idC != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus) and (selectedTerme.idDomaine == 'Orphan')}">
                                                        <p:commandButton id="cbEditThesoTInfo" styleClass="cbEdit" icon="ui-icon-edit" />
                                                        <p:menu style="background: #CEF0C4" overlay="true" trigger="cbEditThesoTInfo" my="left top" at="left bottom">
                                                            <p:menuitem rendered="#{selectedTerme.status != 'hidden'}" value="#{langueBean.getMsg('btnEdit')}" actionListener="#{vue.setAddTInfo(1)}" update=":panPopUp" style="font-size: 12px;"/>
                                                            <p:menuitem rendered="#{selectedTerme.idDomaine == 'Orphan'}" value="#{langueBean.getMsg('index.delOrphan')}" actionListener="#{conceptbean.setDeleteBranchOrphan(1)}" update=":conceptPopUp,:accordeonTree" style="font-size: 12px;"/>

                                                            <p:menuitem rendered="#{(selectedTerme.type == 3) }" value="#{langueBean.getMsg('panel.moveBranche')}" update=":idMoveBranchFromOrphanDlg" oncomplete="PF('moveBranchFromOrphanDlg').show();" style="font-size: 12px;"/>

                                                            <p:menuitem rendered="#{(selectedTerme.type == 3) }" value="#{langueBean.getMsg('panel.addToMT')}" update=":idMoveBranchFromOrphanToGroupDlg" oncomplete="PF('moveBranchFromOrphanToGroupDlg').show();" style="font-size: 12px;"/>
                                                        </p:menu>
                                                    </h:form>
                                                </div>
                                                <script type="application/ld+json">
                                                    <h:outputText value="#{theso.getMetaData()}" />
                                                </script>
                                                <span style="font-size: 17px; font-weight: bold;">
                                                    <h:outputText  id="nom" value="#{selectedTerme.nom}"/><br/>
                                                </span>
                                                <h:outputText id="idC" value="id : #{selectedTerme.idC}"/><br/>
                                                <h:outputText rendered="#{(selectedTerme.notation != '')}" value="notation : #{selectedTerme.notation}"/><br/>
                                                <span>
                                                    <h:outputText value="#{langueBean.getMsg('index.notice')}" />  : 

                                                    <a  href="#{selectedTerme.urlNotice}" target="blanc" >
                                                        <h:outputText id="nbNoti1" value="#{selectedTerme.nbNotices}"/>
                                                    </a>
                                                </span>
                                                <br/>

                                                <h:outputText value="#{langueBean.getMsg('index.MT')}" />  : 

                                                <span>
                                                    <h:outputText id="mTheso" value="#{selectedTerme.microTheso}"/><br/>
                                                </span>
                                                <h:outputText value="#{langueBean.getMsg('index.dateC')}" />  : 
                                                <h:outputText id="dateC" value="#{selectedTerme.dateC}"/><br/>
                                                <span>
                                                    <h:outputText value="#{langueBean.getMsg('index.dateE')}" />  : 
                                                    <h:outputText id="dateM" value="#{selectedTerme.dateM}"/><br/>
                                                </span>
                                                <h:panelGroup rendered="#{selectedTerme.idC != null and selectedTerme.fusions.size() > 0}">
                                                    <ui:repeat value="#{selectedTerme.fusions}" var="fu" >
                                                        <h:outputText rendered="#{fu.idConcept1 == selectedTerme.idC}" value="#{langueBean.getMsg('index.deprec1')} #{fu.lexicalValue2} &lt;br/&gt;" escape="false" />
                                                        <h:outputText rendered="#{fu.idConcept2 == selectedTerme.idC}" value="#{langueBean.getMsg('index.deprec2')} #{fu.lexicalValue1} &lt;br/&gt;" escape="false" />
                                                    </ui:repeat>
                                                </h:panelGroup>

                                                <!-- affichage du nombre total des fils -->
                                                <span>
                                                    <p:tooltip />
                                                    <h:form>
                                                        <h:outputText value="#{(langueBean.getMsg('index.totalOfConcepts'))}"/> : 
                                                        <h:outputText value="#{selectedTerme.getNbConceptOfBranch()}"/>
                                                    </h:form>
                                                </span>
                                                <h:outputText value="#{langueBean.getMsg('index.creator')} : #{selectedTerme.creatorName}"/><br/>
                                                <h:outputText value="#{langueBean.getMsg('index.contributor')} :  #{selectedTerme.contributorName}"/><br/>




                                                <!-- affichage de l'URL pérenne-->

                                                <!-- cas où l'Id Ark est renseigné, alors on affiche l'Id Ark -->
                                                <h:outputText id= "ark" rendered="#{(selectedTerme.idArk != null) and (selectedTerme.idArk != '')}"
                                                              value="#{langueBean.getMsg('index.link')} :" /> <br />

                                                <!-- pour afficher un toolTipText-->
                                                <p:tooltip id="toolTipGrow" for="ark" value="#{theso.getCheminSite()}#{selectedTerme.getLienTerme()}"
                                                           showEffect="clip" hideEffect="explode" />


                                                <span>
                                                    <h:outputLink rendered="#{(selectedTerme.idArk != null) and (selectedTerme.idArk != '')}"
                                                                  value="#{theso.getServerArk()}#{selectedTerme.idArk}" >
                                                        <h:outputText rendered="#{(selectedTerme.idArk != null) and (selectedTerme.idArk != '')}"
                                                                      value="#{theso.getServerArk()}#{selectedTerme.idArk}" />
                                                    </h:outputLink>
                                                </span>
                                                <!-- cas où l'Id Ark est vide, alors on affiche l'URL interne -->
                                                <h:outputText id= "url" rendered="#{(selectedTerme.idArk == '') and (selectedTerme.idT != null) and (selectedTerme.idT != '')}"
                                                              value="#{langueBean.getMsg('index.link')} :" /> <br />
                                                <h:outputLink rendered="#{(selectedTerme.idArk == '') and (selectedTerme.idT != null) and (selectedTerme.idT != '')}"
                                                              value="#{theso.getCheminSite()}#{selectedTerme.getLienTerme()}" target="blanc" >
                                                    <span>
                                                        <h:outputText rendered="#{(selectedTerme.idArk == '') and (selectedTerme.idT != null) and (selectedTerme.idT != '')}"
                                                                      value="#{theso.getCheminSite()}#{selectedTerme.getLienTerme()}" />
                                                    </span>
                                                </h:outputLink>                                                
                                            </div>
                                        </div>
                                        <!--INFO TERMES FIN -->

                                        <!--TERMES SPECIFIQUES DEBUT -->
                                        <div id="divGenerale">
                                            <div class="titreSpecifique">
                                                <h:outputText value="#{langueBean.getMsg('index.NT')}" rendered="#{(treeBean.browserName != 'agent')}"/> 
                                                <div id="imageEdition">
                                                    <h:form id="formEditTSpe" 
                                                            rendered="#{(user1.user.name != null) and (selectedTerme.idC != null) and (user1.isHaveWriteToCurrentThesaurus) 
                                                                        and (user1.haveRights(2)) and (selectedTerme.status != 'hidden') and (selectedTerme.idDomaine != 'Orphan')}">
                                                        <p:commandButton id="cbEditThesoTSpe" styleClass="cbEdit" icon="ui-icon-edit"/>                                                        
                                                        <p:menu style="background: #CEF0C4" overlay="true" trigger="cbEditThesoTSpe" my="left top" at="left bottom">
                                                            <p:menuitem value="#{langueBean.getMsg('popup.addTS')}" update=":idNtEditDlg" oncomplete="PF('ntEditDlg').show();" style="font-size: 12px;"/>
                                                        </p:menu>

                                                    </h:form>
                                                </div>
                                            </div>
                                            <div class="contenuSpecifique">
                                                <h:panelGroup  id="speci" rendered="#{(treeBean.browserName != 'agent')}">
                                                    <ui:repeat value="#{selectedTerme.termesSpecifique}" var="item1">
                                                        <h:form>
                                                            <p:commandButton styleClass="termClick" rendered="#{item1.value != ''}" value="#{item1.value}" escape="false"
                                                                             actionListener="#{treeBean.changeTerme(item1.key, selectedTerme.getTypeInf())}" 
                                                                             update=":accordeonTree,:panContenu,:contenuDroite1,:contenuDroite2,:contenuDroite3" />
                                                            <p:commandButton styleClass="termClick" rendered="#{item1.value == ''}" value="#{item1.key}" escape="false"
                                                                             actionListener="#{treeBean.changeTerme(item1.key, selectedTerme.getTypeInf())}" 
                                                                             update=":accordeonTree,:panContenu,:contenuDroite1,:contenuDroite2,:contenuDroite3" />

                                                        </h:form>
                                                    </ui:repeat>
                                                </h:panelGroup>
                                            </div>
                                        </div>

                                        <!--TERMES SPECIFIQUES FIN -->
                                    </div>
                                    <div id="alignDroite">
                                        <!--TERMES ASSOCIES DEBUT -->
                                        <div id="divGenerale">
                                            <div class="titreAssocie">
                                                <h:outputText value="#{langueBean.getMsg('index.RT')}" rendered="#{(treeBean.browserName != 'agent')}" /> 
                                                <div id="imageEdition">
                                                    <h:form id="formEditTAsso"
                                                            rendered="#{(user1.user.name != null) and (selectedTerme.idC != null) and (user1.haveRights(2) and (user1.isHaveWriteToCurrentThesaurus) and (selectedTerme.idDomaine != 'Orphan'))}">
                                                        <p:commandButton id="dynaButtonTAsso" rendered="#{selectedTerme.type != 1}" styleClass="cbEdit" icon="ui-icon-edit"/>
                                                        <p:menu style="background: #CEF0C4" overlay="true" trigger="dynaButtonTAsso" my="left top" at="left bottom">
                                                            <p:menuitem value="#{langueBean.getMsg('popup.addRel')}" actionListener="#{vue.setAddTAsso(1)}" update=":panPopUp" style="font-size: 12px;"/>
                                                            <p:menuitem value="#{langueBean.getMsg('popup.delRel')}" actionListener="#{vue.setAddTAsso(2)}" update=":panPopUp" style="font-size: 12px;"/>
                                                        </p:menu>

                                                    </h:form>
                                                </div>
                                            </div>
                                            <div class="contenuAssocie">
                                                <h:panelGroup  id="asso" rendered="#{(treeBean.browserName != 'agent')}">
                                                    <ui:repeat value="#{selectedTerme.termesAssocies}" var="item2">
                                                        <h:form>
                                                            <p:commandButton styleClass="termClick" rendered="#{item2.value != ''}" value="#{item2.value}" escape="false"
                                                                             actionListener="#{treeBean.changeTerme(item2.key, 0)}" 
                                                                             update=":accordeonTree,:panContenu,:contenuDroite1,:contenuDroite2,:contenuDroite3" />
                                                            <p:commandButton styleClass="termClick" rendered="#{item2.value == ''}" value="#{item2.key}" escape="false"
                                                                             actionListener="#{treeBean.changeTerme(item2.key, 0)}" 
                                                                             update=":accordeonTree,:panContenu,:contenuDroite1,:contenuDroite2,:contenuDroite3" />
                                                        </h:form>
                                                    </ui:repeat>
                                                </h:panelGroup>
                                            </div>
                                        </div>
                                        <!--TERMES ASSOCIE FIN -->
                                        <!--TERMES SYNONYMES DEBUT -->
                                        <div id="divGenerale">
                                            <div class="titreSynonyme">
                                                <h:outputText value="#{langueBean.getMsg('index.UF')}" /> 
                                                <div id="imageEdition">
                                                    <h:form id="formEditTSyno" 
                                                            rendered="#{(user1.user.name != null) and (selectedTerme.idC != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus) and (selectedTerme.status != 'hidden') and (selectedTerme.idDomaine != 'Orphan')}">                                                        
                                                        <p:commandButton id="dynaButtonTSyno" rendered="#{selectedTerme.type != 1}" styleClass="cbEdit" icon="ui-icon-edit"/>
                                                        <p:menu style="background: #CEF0C4" overlay="true" trigger="dynaButtonTSyno" my="left top" at="left bottom">
                                                            <p:menuitem value="#{langueBean.getMsg('popup.addUSE')}" actionListener="#{vue.setAddTSyno(1)}" update=":panPopUp" style="font-size: 12px;"/>
                                                            <p:menuitem value="#{langueBean.getMsg('popup.delUSE')}" actionListener="#{vue.setAddTSyno(2)}" update=":panPopUp" style="font-size: 12px;"/>
                                                        </p:menu>

                                                    </h:form>
                                                </div>
                                            </div>
                                            <div class="contenuSynonyme">
                                                <!--<h:outputText value="#{langueBean.getMsg('index.UF1')}" />  : <br/>-->
                                                <h:panelGroup  id="synoE">
                                                    <ui:repeat value="#{selectedTerme.termesSynonymesE}" var="item3">
                                                        <h:outputText value="#{item3}" styleClass="nomSynonyme" /><br/>
                                                    </ui:repeat>
                                                </h:panelGroup>
                                                <h:outputText rendered="#{(user1.user.name != null) and (selectedTerme.idC != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus) and (selectedTerme.status != 'hidden') and (selectedTerme.idDomaine != 'Orphan')}" value="#{langueBean.getMsg('index.UF2')}:" styleClass="nomSynonymeCache"/>  <br/>



                                                <h:panelGroup  id="synoP" rendered="#{(user1.user.name != null) and (selectedTerme.idC != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus) and (selectedTerme.status != 'hidden') and (selectedTerme.idDomaine != 'Orphan')}">
                                                    <ui:repeat value="#{selectedTerme.termesSynonymesP}" var="item4">
                                                        <h:outputText value="#{item4}" styleClass="nomSynonyme" /><br/>
                                                    </ui:repeat>
                                                </h:panelGroup>
                                            </div>
                                        </div>
                                        <!--TERMES SYNONYMES FIN -->
                                        <!--NOTE DEBUT -->
                                        <h:panelGroup> <!--
                                                      rendered="#{selectedTerme.definition != '' or selectedTerme.noteApplication != '' or selectedTerme.noteHistorique != '' or selectedTerme.noteEditoriale != '' }"
                                            -->

                                            <div id="divGenerale">
                                                <div class="titreNote">
                                                    <h:outputText value="#{langueBean.getMsg('index.note')}" /> 
                                                    <div id="imageEdition">
                                                        <h:form id="formEditNote" 
                                                                rendered="#{(user1.user.name != null) and (selectedTerme.idC != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus) and (selectedTerme.idDomaine != 'Orphan')}">

                                                            <p:commandButton id="dynaButtonNote" rendered="#{selectedTerme.type != 1}" styleClass="cbEdit" icon="ui-icon-edit"/>
                                                            <p:menu style="background: #CEF0C4" overlay="true" trigger="dynaButtonNote" my="left top" at="left bottom">
                                                                <p:menuitem value="#{langueBean.getMsg('index.note5')}" actionListener="#{vue.setAddNote(5)}" update=":panPopUp" style="font-size: 12px;"/>
                                                                <p:menuitem value="#{langueBean.getMsg('index.note1')}" actionListener="#{vue.setAddNote(1)}" update=":panPopUp" style="font-size: 12px;"/>
                                                                <p:menuitem value="#{langueBean.getMsg('index.note2')}" actionListener="#{vue.setAddNote(2)}" update=":panPopUp" style="font-size: 12px;"/>
                                                                <p:menuitem value="#{langueBean.getMsg('index.note3')}" actionListener="#{vue.setAddNote(3)}" update=":panPopUp" style="font-size: 12px;"/>
                                                                <p:menuitem value="#{langueBean.getMsg('index.note4')}" actionListener="#{vue.setAddNote(4)}" update=":panPopUp" style="font-size: 12px;"/>
                                                            </p:menu>

                                                        </h:form>
                                                    </div>
                                                </div>
                                                <div class="contenuNote">

                                                    <!-- &lt;br/&gt; pour afficher <br/> -->
                                                    <div id="clean" />
                                                    <h:panelGroup id="note">

                                                        <h:outputText value="#{langueBean.getMsg('index.note1')} : " escape="false" style="font-weight: bold;"
                                                                      rendered="#{selectedTerme.definition != null and selectedTerme.definition != '' }" />
                                                        <span itemprop="articleBody">
                                                            <h:outputText value="#{selectedTerme.definition} &lt;br/&gt;" escape="false" 
                                                                          rendered="#{selectedTerme.definition != null and selectedTerme.definition != '' }"/>
                                                        </span>

                                                        <h:outputText value="#{langueBean.getMsg('index.note5')} : " style="font-weight: bold;"
                                                                      rendered="#{selectedTerme.note != null and selectedTerme.note != ''}" />
                                                        <h:outputText value="#{selectedTerme.note} &lt;br/&gt;" escape="false"
                                                                      rendered="#{selectedTerme.note != null and selectedTerme.note != ''}" />

                                                        <h:outputText value="#{langueBean.getMsg('index.note2')} : " style="font-weight: bold;"
                                                                      rendered="#{selectedTerme.noteApplication != null and selectedTerme.noteApplication != ''}" />
                                                        <h:outputText value="#{selectedTerme.noteApplication} &lt;br/&gt;" escape="false"
                                                                      rendered="#{selectedTerme.noteApplication != null and selectedTerme.noteApplication != ''}" />

                                                        <h:outputText value="#{langueBean.getMsg('index.note3')} : " style="font-weight: bold;"
                                                                      rendered="#{selectedTerme.noteHistorique != null and selectedTerme.noteHistorique != ''}" />
                                                        <h:outputText value="#{selectedTerme.noteHistorique} &lt;br/&gt;" escape="false"
                                                                      rendered="#{selectedTerme.noteHistorique != null and selectedTerme.noteHistorique != ''}" />

                                                        <h:outputText value="#{langueBean.getMsg('index.note4')} : " style="font-weight: bold;"
                                                                      rendered="#{selectedTerme.noteEditoriale != null and selectedTerme.noteEditoriale != ''}" />
                                                        <h:outputText value="#{selectedTerme.noteEditoriale} &lt;br/&gt;" escape="false"
                                                                      rendered="#{selectedTerme.noteEditoriale != null and selectedTerme.noteEditoriale != ''}" />
                                                        
                                                    </h:panelGroup>
                                                    <!--<p:accordionPanel id="note" multiple="true" dynamic="true" cache="true">
                                                        <p:tab title="#{langueBean.getMsg('index.note1')}">
                                                            <h:outputText value="#{selectedTerme.definition}"/>
                                                        </p:tab>                                                    
                                                        <p:tab title="#{langueBean.getMsg('index.note2')}">
                                                            <h:outputText value="#{selectedTerme.noteApplication}"/>
                                                        </p:tab>
                                                        <p:tab title="#{langueBean.getMsg('index.note3')}">
                                                            <h:outputText value="#{selectedTerme.noteHistorique}"/>
                                                        </p:tab>
                                                        <p:tab title="#{langueBean.getMsg('index.note4')}">
                                                            <h:outputText value="#{selectedTerme.noteEditoriale}"/>
                                                        </p:tab>
                                                    </p:accordionPanel>-->
                                                </div>
                                            </div>
                                        </h:panelGroup>
                                        <!--NOTE FIN -->
                                        <!--ALIGNEMENT DEBUT -->
                                        <div id="divGenerale">
                                            <div class="titreAlign">
                                                <h:outputText value="#{langueBean.getMsg('index.align')}" />
                                                <div id="imageEdition">
                                                    <h:form id="formEditAlign" 
                                                            rendered="#{(user1.user.name != null) and (selectedTerme.idC != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus) and (selectedTerme.status != 'hidden') and (selectedTerme.idDomaine != 'Orphan')}">
                                                        <p:commandButton id="dynaButtonAlign" rendered="#{selectedTerme.type != 1}" 
                                                                         styleClass="cbEdit" icon="ui-icon-edit" >
                                                            <p:menu style="background: #CEF0C4" overlay="true" trigger="dynaButtonAlign" my="left top" at="left bottom">
                                                                <p:menuitem value="#{langueBean.getMsg('index.alignBtn1')}" actionListener="#{vue.setAddAlign(1)}" update=":panPopUp" style="font-size: 12px;"/>
                                                                <p:menuitem value="#{langueBean.getMsg('index.alignBtn2')}" actionListener="#{vue.setAddAlign(2)}" update=":panPopUp" style="font-size: 12px;"/>
                                                                <p:menuitem value="#{langueBean.getMsg('index.alignBtn3')}" actionListener="#{vue.setAddAlign(3)}" update=":panPopUp" style="font-size: 12px;"/>
                                                            </p:menu>
                                                        </p:commandButton>
                                                    </h:form>
                                                </div>
                                            </div>
                                            <div class="contenuAlign">
                                                <ui:repeat value="#{selectedTerme.ALignType}" var="allAlign">
                                                    <h:outputText value="#{allAlign.value} : " /><br/>
                                                    <ui:repeat value="#{selectedTerme.align}" var="alignVar">
                                                        <h:panelGroup rendered="#{allAlign.key == alignVar.alignement_id_type}" styleClass="nomSynonyme">
                                                            <h:outputText value="#{alignVar.thesaurus_target} - " />
                                                            <a href="#{alignVar.uri_target}" target="_blank">
                                                                <h:outputText rendered="#{alignVar.concept_target != null and alignVar.concept_target.trim() != ''}" value="#{alignVar.concept_target}" />
                                                                <h:outputText rendered="#{alignVar.concept_target == null or alignVar.concept_target.trim() == ''}" value="#{alignVar.uri_target}" />
                                                            </a>
                                                            <br/>
                                                        </h:panelGroup>
                                                    </ui:repeat>
                                                </ui:repeat>
                                            </div>
                                        </div>
                                        <!--ALIGNEMENT FIN -->
                                    </div>
                                </h:panelGroup>
                            </div>
                            <div id="clean" ></div>
                            <!-- CONTENU CENTRAL FIN -->
                        </div>
                        <div id="droite">
                            <div id="SplitterHorizDroit1">

                                <!--TRADUCTION DEBUT -->
                                <div id="langue" style="overflow-y: auto;">
                                    <h:panelGroup id="contenuDroite3">

                                        <div id="titreSplinter">
                                            <h:outputText value="#{langueBean.getMsg('index.trad')}" /> 

                                            <div id="imageEdition">
                                                <h:form id="formEditTrad" 
                                                        rendered="#{(user1.user.name != null) and (selectedTerme.idC != null) and (theso.haveTrad() and (user1.haveRights(2))) and (user1.isHaveWriteToCurrentThesaurus) and (selectedTerme.status != 'hidden') and (selectedTerme.idDomaine != 'Orphan')}">
                                                    <p:commandButton id="cbEditThesoTrad" styleClass="cbEdit" icon="ui-icon-edit" />
                                                    <p:menu style="background: #CEF0C4" overlay="true" trigger="cbEditThesoTrad" my="left top" at="left bottom">
                                                        <p:menuitem value="#{langueBean.getMsg('index.addTrad')}" actionListener="#{vue.setAddTrad(1)}" update=":panPopUp" style="font-size: 12px;"/>
                                                        <p:menuitem value="#{langueBean.getMsg('index.delTrad')}" actionListener="#{vue.setAddTrad(2)}" update=":panPopUp" style="font-size: 12px;"/>
                                                    </p:menu>

                                                </h:form>
                                            </div>
                                        </div>
                                        <h:panelGroup  id="lang">
                                            <ui:repeat value="#{selectedTerme.langues}" var="item5">
                                                <h:form>
                                                    <p:commandButton styleClass="termClick" value="#{item5.value} (#{item5.key})" 
                                                                     actionListener="#{theso.changeTermeTrad(selectedTerme.idC, item5.key, selectedTerme.type)}" 
                                                                     update=":panChoixTheso,:accordeonTree,:panContenu,:contenuDroite1,:contenuDroite2,:contenuDroite3" />
                                                </h:form>
                                            </ui:repeat>
                                        </h:panelGroup>
                                    </h:panelGroup>
                                </div>
                                <!--TRADUCTION FIN -->
                                <div>
                                    <div id="SplitterHorizDroit2">
                                        <!--FACETTE DEBUT -->
                                        <div id="facette">
                                            <h:panelGroup id="contenuDroite2">
                                                <div id="titreSplinter">
                                                    <h:outputText value="#{langueBean.getMsg('index.facet')}" /> 
                                                    <div id="imageEdition">
                                                        <h:form id="formEditFacette" target="_blanc"
                                                                rendered="#{(user1.user.name != null) and (selectedTerme.idC != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus) and (selectedTerme.status != 'hidden') and (selectedTerme.idDomaine != 'Orphan')}">
                                                            <p:commandButton id="cbEditThesoFacette" rendered="#{selectedTerme.type != 1}" styleClass="cbEdit" icon="ui-icon-edit" 
                                                                             action="#{vue.setAddFacette(true)}" update=":panPopUp" />
                                                        </h:form>
                                                    </div>
                                                </div>
                                                <h:form>
                                                    <p:tree id="facetteTree" value="#{selectedTerme.root}" var="nodeFT" dynamic="true" cache="true" animate="true" 
                                                            selectionMode="single"  selection="#{selectedTerme.selectedNode}" styleClass="styleFacetteTerm" >
                                                        <p:ajax event="expand" listener="#{selectedTerme.onNodeExpand}" />  
                                                        <p:ajax event="select" 
                                                                update=":panContenu,:contenuDroite1,:contenuDroite2,:contenuDroite3" 
                                                                listener="#{selectedTerme.onNodeSelect}" /> 
                                                        <p:treeNode type="dossier" expandedIcon="ui-icon ui-icon-dossier-open" 
                                                                    collapsedIcon="ui-icon ui-icon-dossier-close">  
                                                            <h:outputText value="#{nodeFT}"/>  
                                                        </p:treeNode>  
                                                        <p:treeNode type="facette" icon="ui-icon ui-icon-facette">  
                                                            <h:outputText value="(#{nodeFT})" style="color: #659123;"/>  
                                                        </p:treeNode>
                                                        <p:treeNode type="fichier" icon="ui-icon ui-icon-fichier">  
                                                            <h:outputText value="#{nodeFT}"/>  
                                                        </p:treeNode>
                                                        <p:treeNode>  
                                                            <h:outputText value="#{nodeFT}"/>  
                                                        </p:treeNode>
                                                    </p:tree>
                                                </h:form>
                                            </h:panelGroup>
                                        </div>
                                        <!--FACETTE FIN -->

                                        <!--IMAGE DEBUT -->
                                        <div id="image">
                                            <h:panelGroup id="contenuDroite1">
                                                <div id="titreSplinter">
                                                    <h:form style="float: left; width: 45px;"
                                                            rendered="#{selectedTerme.images.size() != 0}">
                                                        <p:commandButton type="button" onclick="PF('switcher').previous();"
                                                                         icon="ui-icon-circle-triangle-w" id="prev" styleClass="stylePix"/>
                                                        <p:commandButton type="button" onclick="PF('switcher').next();"
                                                                         icon="ui-icon-circle-triangle-e" id="next" styleClass="stylePix"/>
                                                    </h:form>
                                                    <h:outputText value="#{langueBean.getMsg('index.picture')}" /> 
                                                    <div id="imageEdition">
                                                        <h:form id="formeEditImage" rendered="#{(user1.user.name != null) and (selectedTerme.idC != null) and (user1.haveRights(2)) and (user1.isHaveWriteToCurrentThesaurus) and (selectedTerme.status != 'hidden') and (selectedTerme.idDomaine != 'Orphan')}">
                                                            <p:commandButton id="cbEditThesoImage" rendered="#{selectedTerme.type != 1}" styleClass="cbEdit" icon="ui-icon-edit"  
                                                                             actionListener="#{vue.setAddImage(true)}" update=":panPopUp" />
                                                        </h:form>
                                                    </div>
                                                    <div id="clean" />
                                                </div>
                                                <p:imageSwitch effect="wipe" widgetVar="switcher" id="manuelSwitcher" slideshowAuto="true">

                                                    <ui:repeat value="#{selectedTerme.images}" var="image" id="manuelSwitcherImages">
                                                        <h:form>

                                                            <img itemprop="image">
                                                                <p:graphicImage value="/pix/#{fileBean.dossierResize}/#{image.imageName}" onclick="PF('dlgPix').show()" 
                                                                                style="cursor: pointer;"/>
                                                            </img>
                                                            <p:commandButton value="Supprimer" actionListener="#{selectedTerme.delImage(image.imageName)}" 
                                                                             update=":contenuDroite1" rendered="#{(user1.user.name != null) and (selectedTerme.idC != null)}" 
                                                                             styleClass="styleButtonRefus" >
                                                                <p:confirm header="#{langueBean.getMsg('confirm')}" message="#{langueBean.getMsg('index.valid2')}" 
                                                                           icon="ui-icon-alert" />  
                                                            </p:commandButton>
                                                            <p:confirmDialog global="true" showEffect="fade" hideEffect="explode">  
                                                                <p:commandButton value="#{langueBean.getMsg('yes')}" type="button" styleClass="ui-confirmdialog-yes" 
                                                                                 icon="ui-icon-check"/>  
                                                                <p:commandButton value="#{langueBean.getMsg('no')}" type="button" styleClass="ui-confirmdialog-no" 
                                                                                 icon="ui-icon-close"/>       
                                                            </p:confirmDialog>
                                                        </h:form>
                                                    </ui:repeat>

                                                </p:imageSwitch>
                                                <p:dialog header="Images" widgetVar="dlgPix" modal="true" draggable="false" resizable="false">
                                                    <h:form style="float: left;">
                                                        <p:commandButton type="button" onclick="PF('fullSwitcher').previous();" icon="ui-icon-circle-triangle-w" 
                                                                         id="prev" styleClass="stylePix"/>
                                                        <p:commandButton type="button" onclick="PF('fullSwitcher').next();" icon="ui-icon-circle-triangle-e" 
                                                                         id="next" styleClass="stylePix"/>
                                                    </h:form>
                                                    <div id="clean" />
                                                    <p:imageSwitch effect="fade" widgetVar="fullSwitcher" slideshowAuto="false">
                                                        <ui:repeat value="#{selectedTerme.images}" var="imageFull">
                                                            <p:graphicImage value="/pix/#{imageFull.imageName}" />
                                                        </ui:repeat>
                                                    </p:imageSwitch>
                                                </p:dialog>
                                            </h:panelGroup>
                                        </div>
                                        <!--IMAGES FIN -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div><br/>
            <!-- GESTIONNAIRE FIN -->
            <h:panelGroup id="footer">
                <footer style="text-align: center">
                    <br />
                    <div style="margin-bottom: 5px; margin-top: -15px;">
                        <a href="opentheso.xhtml"  style="color: #BD6909; text-decoration: none; ">©Opentheso</a>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                        <h:outputLink  value="copyright.xhtml" style="color: #BD6909; text-decoration: none;"> 
                            <h:outputText value="©#{theso.thisTheso.title}" />
                        </h:outputLink>

                    </div>
                </footer>
            </h:panelGroup>
        </center>

        <ui:insert name="status">
            <p:ajaxStatus>
                <f:facet name="start">
                    <p:graphicImage id="iconeLoad" value="/images/loading.gif" width="200" />
                </f:facet>

                <f:facet name="complete">
                    <h:outputText value="" />
                </f:facet>
            </p:ajaxStatus>
        </ui:insert>
    </h:body>
</html>
