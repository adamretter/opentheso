<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

    <h:panelGroup id="panPopUp">
        <!-- POP UP DOMAINE DEBUT -->
        <h:panelGroup id="ajGroup" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.selectedActionDom != 0}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.selectedActionDom != 0}" styleClass="popUp" style="width: 250px;">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.btnMT')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseGroup" styleClass="cbClose" icon="ui-icon-fermer" 
                                             actionListener="#{vue.setSelectedActionDom(0)}" update=":ajGroup" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <!-- Ajout d'un domaine -->
                <h:panelGroup rendered="#{vue.selectedActionDom == 1}">
                    <fieldset>
                        <legend><h:outputText value="#{langueBean.getMsg('group.add')}" /></legend>
                        <h:form>
                            <p:messages showDetail="true" autoUpdate="true" />
                            <table>
                                <tr>
                                    <td><h:outputText value="#{langueBean.getMsg('popup.name')}" /> : </td>
                                    <td>
                                        <h:inputText id="lVDom" value="#{theso.nodeCG.lexicalValue}"/>
                                    </td>
                                </tr>           
                            </table>
                            <br/>
                            <p:commandButton id="cbAjGroupTheso" value="#{langueBean.getMsg('btnAdd')}" actionListener="#{theso.ajouterDomaine()}" 
                                             update=":ajGroup,:accordeonTree" styleClass="styleButton"/>
                        </h:form>
                    </fieldset>
                </h:panelGroup>
                

                <!-- Supprimer un domaine -->
                <h:panelGroup rendered="#{vue.selectedActionDom == 2}">
                    <fieldset>
                        <legend><h:outputText value="#{langueBean.getMsg('group.delete')}" /></legend>
                        <h:form>
                            <p:messages showDetail="true" autoUpdate="true" />
                            <table>
                                <tr>
                                    <td><h:outputText value="#{langueBean.getMsg('popup.name')}" /> : </td>
                                    <td>
                                        <h:inputText id="lVDom" value="#{theso.nodeCG.lexicalValue}"/>
                                    </td>
                                </tr>           
                            </table>
                            <br/>
                            <p:commandButton id="cbAjGroupTheso" value="#{langueBean.getMsg('btnAdd')}" actionListener="#{theso.ajouterDomaine()}" 
                                             update=":ajGroup,:accordeonTree" styleClass="styleButton"/>
                        </h:form>
                    </fieldset>
                </h:panelGroup>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP regenerate Orphan -->
        <h:panelGroup id="regenerateOrphan" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.regenerateOrphan != 0}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.regenerateOrphan != 0}" styleClass="popUp" style="width: 250px;">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.btnMT')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseGroup" styleClass="cbClose" icon="ui-icon-fermer" 
                                             actionListener="#{vue.setRegenerateOrphan(0)}" update=":regenerateOrphan" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <!-- Re génération des orphelins -->
                <h:panelGroup rendered="#{vue.regenerateOrphan == 1}">
                    <fieldset>
                        <legend><h:outputText value="#{langueBean.getMsg('tools.regenerateOrphan')}" /></legend>
                        <h:form>
                            <p:messages showDetail="true" autoUpdate="true" />
                            <table>
                                <tr>
                                    <td><h:outputText value="#{langueBean.getMsg('theso.infoRegenerationOrphan')}" /> </td>
                                </tr>           
                            </table>
                            <br/>
                            <p:commandButton id="cbGenerateOrphan" value="#{langueBean.getMsg('btnOk')}" actionListener="#{theso.regenerateOrphan()}" 
                                             update=":regenerateOrphan,:accordeonTree" styleClass="styleButton"/>
                        </h:form>
                    </fieldset>
                </h:panelGroup>
            </h:panelGroup>
        </h:panelGroup>        


        <!-- POP UP TERMES GENERIQUES DEBUT -->

        <!-- POP UP TERMES GENERIQUES FIN -->

        <!-- POP UP TERMES SPECIFIQUES DEBUT -->
 
        <!-- POP UP TERMES SPECIFIQUES FIN -->

        <!-- POP UP TERMES ASSOCIES DEBUT -->
        <h:panelGroup id="panEditTAsso" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.addTAsso != 0}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.addTAsso != 0}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.RT')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseTA" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setAddTAsso(0)}" 
                                             update=":panEditTAsso" />
                        </h:form>
                    </div>
                </div>
                <br/>

                <!-- Ajout relation -->
                <h:panelGroup rendered="#{vue.addTAsso == 1}" >
                    <fieldset>
                        <legend><h:outputText value="#{langueBean.getMsg('popup.addRel')}" /></legend>
                        <h:form>
                            <p:messages showDetail="true" autoUpdate="true" /><br/>
                            <h:outputText value="#{langueBean.getMsg('popup.name')}" /> : 
                            <p:autoComplete value="#{autoComp.selectedAtt}" completeMethod="#{autoComp.completTerm}" var="t3"
                                            itemLabel="#{t3.termLexicalValue}" itemValue="#{t3}" converter="termConverter" forceSelection="true">
                                <f:facet name="itemtip">
                                    <h:panelGrid columns="2" cellpadding="5" width="200" >
                                        <f:facet name="header" rendered="#{(t3.url) != null}">
                                            <h:outputText value="ID : " />
                                            <h:outputText value="#{t3.idConcept}" />
                                        </f:facet>

                                        <h:outputText value="#{langueBean.getMsg('autoComp1')} : " />
                                        <h:outputText value="#{t3.groupLexicalValue}" />

                                        <h:outputText value="#{langueBean.getMsg('autoComp2')} : " />
                                        <h:outputText value="#{t3.definition}" />
                                    </h:panelGrid>
                                </f:facet>
                            </p:autoComplete>
                            <br/><br/>
                            <p:commandButton id="cbAjTA" value="#{langueBean.getMsg('btnAdd')}" actionListener="#{autoComp.newTAsso()}" 
                                             update=":panEditTAsso,:panContenu" styleClass="styleButton" />
                        </h:form>
                    </fieldset>
                </h:panelGroup>

                <!-- suppression relation -->
                <h:panelGroup rendered="#{vue.addTAsso == 2}" >
                    <fieldset style="overflow-y: auto">
                        <legend><h:outputText value="#{langueBean.getMsg('popup.delRel')}" /></legend>
                        <table id="tableRelations">
                            <tr>
                                <th><h:outputText value="#{langueBean.getMsg('popup.terms')}" /></th>
                                <th></th>
                            </tr>
                            <ui:repeat value="#{selectedTerme.termesAssocies}" var="item2">
                                <tr>
                                    <td><h:outputText value="#{item2.value} (#{item2.key})" /></td>
                                    <td>
                                        <h:form>
                                            <p:commandButton id="cbSuppTradTheso" styleClass="cbSupp" icon="ui-icon-supp" 
                                                             actionListener="#{selectedTerme.delAsso(item2.key)}" update=":panEditTAsso,:panContenu">
                                                <p:confirm header="#{langueBean.getMsg('confirm')}" message="#{langueBean.getMsg('popup.valid3')}" icon="ui-icon-alert" />  
                                            </p:commandButton>  

                                            <p:confirmDialog global="true" showEffect="fade" hideEffect="explode">  
                                                <p:commandButton value="#{langueBean.getMsg('yes')}" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>  
                                                <p:commandButton value="#{langueBean.getMsg('no')}" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>       
                                            </p:confirmDialog> 
                                        </h:form>
                                    </td>
                                </tr>
                            </ui:repeat>
                        </table>
                    </fieldset>
                </h:panelGroup>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP TERMES ASSOCIES FIN -->

        <!-- POP UP TERMES SYNONYMES DEBUT -->
        <h:panelGroup id="panEditTSyno" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.addTSyno != 0}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.addTSyno != 0}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.UF')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseTSy" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setAddTSyno(0)}" 
                                             update=":panEditTSyno" />
                        </h:form>
                    </div>
                </div>
                <br/>

                <!-- Ajout relation -->
                <h:panelGroup rendered="#{vue.addTSyno == 1}" >
                    <fieldset>
                        <legend><h:outputText value="#{langueBean.getMsg('popup.addRel')}" /></legend>
                        <h:form>
                            <p:messages showDetail="true" autoUpdate="true" />
                            <table>
                                <tr>
                                    <td><h:outputText value="#{langueBean.getMsg('popup.name')}" /> : </td>
                                    <td>
                                        <h:inputText id="lVsyno" value="#{selectedTerme.valueEdit}"/>
                                    </td>
                                </tr>
                                <tr>
                                    <td><h:outputText value="#{langueBean.getMsg('popup.type')}" /> : </td>
                                    <td>
                                        <h:selectOneMenu value="#{selectedTerme.statutEdit}" styleClass="listes" style="width: 150px;">
                                            <f:selectItem itemLabel="#{langueBean.getMsg('index.UF1')}" itemValue="USE"/>
                                            <f:selectItem itemLabel="#{langueBean.getMsg('index.UF2')}" itemValue="Hidden"/>
                                        </h:selectOneMenu>
                                    </td>
                                </tr>            
                            </table>
                            <br/>
                            <p:commandButton id="cbAjTSynoTheso" value="#{langueBean.getMsg('btnAdd')}" actionListener="#{selectedTerme.creerTermeSyno()}"
                                             update=":panEditTSyno,:panContenu" styleClass="styleButton"/>
                        </h:form>
                    </fieldset>
                </h:panelGroup>

                <!-- suppression relation -->
                <h:panelGroup rendered="#{vue.addTSyno == 2}" >
                    <fieldset style="overflow-y: auto">
                        <legend><h:outputText value="#{langueBean.getMsg('popup.delRel')}" /></legend>
                        <table id="tableRelations">
                            <tr>
                                <th><h:outputText value="#{langueBean.getMsg('popup.termUSE')}" /></th>
                                <th></th>
                            </tr>
                            <ui:repeat value="#{selectedTerme.termesSynonymesE}" var="item3">
                                <tr>
                                    <td><h:outputText value="#{item3}" /></td>
                                    <td>
                                        <h:form>
                                            <p:commandButton id="cbSuppSynoCpt" styleClass="cbSupp" icon="ui-icon-supp" 
                                                             actionListener="#{selectedTerme.delSyno(item3, 'USE')}" update=":panEditTSyno,:panContenu" >
                                                <p:confirm header="#{langueBean.getMsg('confirm')}" message="#{langueBean.getMsg('popup.valid4')}" icon="ui-icon-alert" />  
                                            </p:commandButton>  

                                            <p:confirmDialog global="true" showEffect="fade" hideEffect="explode">  
                                                <p:commandButton value="#{langueBean.getMsg('yes')}" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>  
                                                <p:commandButton value="#{langueBean.getMsg('no')}" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>       
                                            </p:confirmDialog> 
                                        </h:form>
                                    </td>
                                </tr>
                            </ui:repeat>
                        </table>
                        <br/>
                        <table id="tableRelations">
                            <tr>
                                <th><h:outputText value="#{langueBean.getMsg('popup.termHidden')}" /></th>
                                <th></th>
                            </tr>
                            <ui:repeat value="#{selectedTerme.termesSynonymesP}" var="item4">
                                <tr>
                                    <td><h:outputText value="#{item4}" /></td>
                                    <td>
                                        <h:form>
                                            <p:commandButton id="cbSuppTradTheso" styleClass="cbSupp" icon="ui-icon-supp" 
                                                             actionListener="#{selectedTerme.delSyno(item4, 'Hidden')}" update=":panEditTSyno,:panContenu">
                                                <p:confirm header="#{langueBean.getMsg('confirm')}" message="#{langueBean.getMsg('popup.valid4')}" icon="ui-icon-alert" />  
                                            </p:commandButton>  

                                            <p:confirmDialog global="true" showEffect="fade" hideEffect="explode">  
                                                <p:commandButton value="#{langueBean.getMsg('yes')}" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>  
                                                <p:commandButton value="#{langueBean.getMsg('no')}" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>       
                                            </p:confirmDialog> 
                                        </h:form>
                                    </td>
                                </tr>
                            </ui:repeat>
                        </table>
                    </fieldset>
                </h:panelGroup>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP TERMES SYNONYMES FIN -->

        <!-- POP UP NOTE DEBUT -->
        <h:panelGroup id="panEditNote" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.addNote != 0}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.addNote != 0}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.note')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseNote" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setAddNote(0)}" 
                                             update=":panEditNote" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <h:panelGroup rendered="#{vue.addNote == 5}" >
                    <h:form>
                        <fieldset>
                            <legend><h:outputText value="#{langueBean.getMsg('index.note5')}" /></legend>
                            <h:inputTextarea value="#{selectedTerme.note}" styleClass="areaNote" /><br/>
                            <p:commandButton id="cbEditDef" value="#{langueBean.getMsg('btnEdit')}" actionListener="#{selectedTerme.editNote()}"
                                             update=":panEditNote,:note" styleClass="styleButton"/>
                        </fieldset>
                    </h:form>
                </h:panelGroup>
                
                <h:panelGroup rendered="#{vue.addNote == 1}" >
                    <h:form>
                        <fieldset>
                            <legend><h:outputText value="#{langueBean.getMsg('index.note1')}" /></legend>
                            <h:inputTextarea value="#{selectedTerme.definition}" styleClass="areaNote" /><br/>
                            <p:commandButton id="cbEditDef" value="#{langueBean.getMsg('btnEdit')}" actionListener="#{selectedTerme.editDef()}"
                                             update=":panEditNote,:note" styleClass="styleButton"/>
                        </fieldset>
                    </h:form>
                </h:panelGroup>

                <h:panelGroup rendered="#{vue.addNote == 2}" >
                    <h:form>
                        <fieldset>
                            <legend><h:outputText value="#{langueBean.getMsg('index.note2')}" /></legend>
                            <h:inputTextarea value="#{selectedTerme.noteApplication}" styleClass="areaNote" /><br/>
                            <p:commandButton id="cbEditNoteEd" value="#{langueBean.getMsg('btnEdit')}" actionListener="#{selectedTerme.editNoteApp()}"
                                             update=":panEditNote,:note" styleClass="styleButton"/>
                        </fieldset>
                    </h:form>
                </h:panelGroup>

                <h:panelGroup rendered="#{vue.addNote == 3}" >
                    <h:form>
                        <fieldset>
                            <legend><h:outputText value="#{langueBean.getMsg('index.note3')}" /></legend>
                            <h:inputTextarea value="#{selectedTerme.noteHistorique}" styleClass="areaNote" /><br/>
                            <p:commandButton id="cbEditNoteHis" value="#{langueBean.getMsg('btnEdit')}" actionListener="#{selectedTerme.editNoteHisto()}"
                                             update=":panEditNote,:note" styleClass="styleButton"/>
                        </fieldset>
                    </h:form>
                </h:panelGroup>

                <h:panelGroup rendered="#{vue.addNote == 4}" >
                    <h:form>
                        <fieldset>
                            <legend><h:outputText value="#{langueBean.getMsg('index.note4')}" /></legend>
                            <h:inputTextarea value="#{selectedTerme.noteEditoriale}" styleClass="areaNote"/><br/>
                            <p:commandButton id="cbEditNoteApp" value="#{langueBean.getMsg('btnEdit')}" actionListener="#{selectedTerme.editNoteEdit()}"
                                             update=":panEditNote,:note" styleClass="styleButton"/>
                        </fieldset>
                    </h:form>
                </h:panelGroup>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP NOTE FIN -->

        <!-- POP UP ALIGNEMENT DEBUT -->
        <h:panelGroup id="panEditAlign" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.addAlign != 0}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.addAlign != 0}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('popup.align')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseAlign" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setAddAlign(0)}" 
                                             update=":panEditAlign" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <!--Cas ajout manuel d'alignement-->
                <h:form rendered="#{vue.addAlign == 1}">
                    <p:messages showDetail="true" autoUpdate="true" />
                    <table>
                        <tr>
                            <td><h:outputText value="#{langueBean.getMsg('theso')}" /> : </td>
                            <td>
                                <h:inputText value="#{selectedTerme.valueEdit}"/>
                            </td>
                        </tr>
                        <tr>
                            <td><h:outputText value="#{langueBean.getMsg('concept')}" /> : </td>
                            <td>
                                <h:inputText value="#{selectedTerme.valueEdit2}"/>
                            </td>
                        </tr>
                        <tr>
                            <td>URI : </td>
                            <td>
                                <h:inputText value="#{selectedTerme.linkEdit}"/>
                            </td>
                        </tr>
                        <tr>
                            <td><h:outputText value="#{langueBean.getMsg('popup.type')}" /> : </td>
                            <td>
                                <h:selectOneMenu value="#{selectedTerme.statutEdit}" styleClass="listes" style="width: 150px;">
                                    <f:selectItems value="#{selectedTerme.allALignType}" var="tt" itemLabel="#{tt.value}" itemValue="#{tt.key}" />
                                </h:selectOneMenu>
                            </td>
                        </tr>            
                    </table>
                    <br/>
                    <p:commandButton id="cbAjAlignManu" value="#{langueBean.getMsg('btnAdd')}" actionListener="#{selectedTerme.creerAlign()}"
                                     update=":panEditAlign,:panContenu" styleClass="styleButton"/>
                </h:form>

                <!--Cas ajout automatique d'alignement 1-->
                <h:panelGroup rendered="#{vue.addAlign == 2}" >
                    <h:outputText value="#{langueBean.getMsg('popup.addAlign1')}" /> '<h:outputText value="#{selectedTerme.nom}" />' :
                    <h:form>
                        <h:panelGrid columns="4" style="margin-bottom:10px" cellpadding="5">
                            <p:selectBooleanCheckbox value="#{selectedTerme.wiki}" />
                            <h:outputText value=" Wikipedia" style="margin-right: 100px;" />

                            <p:selectBooleanCheckbox value="#{selectedTerme.dbp}" />
                            <h:outputText value=" DBPedia" />

                            <p:selectBooleanCheckbox value="#{selectedTerme.agrovoc}" disabled="true" />
                            <h:outputText value=" Agrovoc" />

                            <p:selectBooleanCheckbox value="#{selectedTerme.gemet}" disabled="true" />
                            <h:outputText value=" Gemet" />
                        </h:panelGrid>
                        <h:panelGrid columns="4" style="margin-bottom:10px" cellpadding="5">
                            <p:selectBooleanCheckbox value="#{selectedTerme.opentheso}" />
                            <h:outputText value=" Opentheso" />
                            
                            <h:inputText a:placeholder="#{langueBean.getMsg('popup.addAlign2')}" value="#{selectedTerme.linkOT}"  title="exp: http://pactols.frantiq.fr/opentheso/" />
                            
                            <h:inputText a:placeholder="Id" value="#{selectedTerme.idOT}" style="width: 25px;" title="Id thesaurus" />
                        </h:panelGrid>
                        <p:commandButton id="cbAjAlignAuto" value="#{langueBean.getMsg('conf.btnValid')}" actionListener="#{selectedTerme.creerAlignAuto()}"
                                         update=":panEditAlign" styleClass="styleButton"/>
                    </h:form>
                </h:panelGroup>

                <!--Cas ajout automatique d'alignement 2-->
                <h:panelGroup rendered="#{vue.addAlign == 4}" >
                    Choix des alignements pour le concept '<h:outputText value="#{selectedTerme.nom}" />' :<br/><br/>
                    <div style="text-align: left; max-width: 600px; max-height: 500px; overflow: auto;" >
                        <h:form>
                            <table>
                                <ui:repeat value="#{selectedTerme.listAlignTemp}" var='nodeAlign'>
                                    <tr>
                                        <td><p:selectBooleanCheckbox value="#{nodeAlign.save}" /></td>
                                        <td>
                                            <h:outputText value="#{nodeAlign.thesaurus_target} - " style="font-weight: bold;" />
                                            <h:outputText value="#{nodeAlign.concept_target} :"/><br/>
                                            <h:outputText rendered="#{nodeAlign.concept_target_alt.trim() != null and nodeAlign.concept_target_alt.trim() != ''}" value="altLable : #{nodeAlign.concept_target_alt}&lt;br/&gt;" escape="false" />
                                            <h:outputText rendered="#{nodeAlign.def_target.trim() != null and nodeAlign.def_target.trim() != ''}" value="#{nodeAlign.def_target}&lt;br/&gt;" escape="false" />
                                            <h:outputLink value="#{nodeAlign.uri_target}" target="_blank" ><h:outputText value="#{nodeAlign.uri_target}" /></h:outputLink><br/>
                                            <h:selectOneMenu value="#{nodeAlign.alignement_id_type}" styleClass="listes" style="width: 150px;">
                                                <f:selectItems value="#{selectedTerme.allALignType}" var="tt" itemLabel="#{tt.value}" itemValue="#{tt.key}" />
                                            </h:selectOneMenu><br/><br/>
                                        </td>
                                    </tr>
                                </ui:repeat>
                                <tr>
                                    <td colspan="2" style="text-align: center;">
                                        <p:commandButton id="cbAjAllAlignAuto" value="#{langueBean.getMsg('conf.btnValid')}" actionListener="#{selectedTerme.ajouterAlignAuto()}"
                                         update=":panEditAlign,:panContenu" styleClass="styleButton"/>
                                    </td>
                                </tr>
                            </table>
                        </h:form>
                    </div>
                </h:panelGroup>

                <!--Cas suppression d'alignement-->
                <h:panelGroup rendered="#{vue.addAlign == 3}" >
                    <table id="tableRelations">
                        <tr>
                            <th><h:outputText value="#{langueBean.getMsg('theso')}" /></th>
                            <th><h:outputText value="#{langueBean.getMsg('concept')}" /></th>
                            <th></th>
                        </tr>
                        <ui:repeat value="#{selectedTerme.align}" var="itemDelALign">
                            <tr>
                                <td><h:outputText value="#{itemDelALign.uri_target}" /></td>
                                <td><h:outputText value="#{itemDelALign.concept_target}" /></td>
                                <td>
                                    <h:form>
                                        <p:commandButton id="cbSuppTradTheso" styleClass="cbSupp" icon="ui-icon-supp" 
                                                         actionListener="#{selectedTerme.delAlign(itemDelALign.id_alignement)}" update=":panEditAlign,:panContenu" >
                                            <p:confirm header="#{langueBean.getMsg('confirm')}" message="#{langueBean.getMsg('popup.valid5')}" icon="ui-icon-alert" />  
                                        </p:commandButton>  

                                        <p:confirmDialog global="true" showEffect="fade" hideEffect="explode">  
                                            <p:commandButton value="#{langueBean.getMsg('yes')}" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>  
                                            <p:commandButton value="#{langueBean.getMsg('no')}" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>       
                                        </p:confirmDialog> 
                                    </h:form>
                                </td>
                            </tr>
                        </ui:repeat>
                    </table>
                </h:panelGroup>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP ALIGNEMENT FIN -->

        <!-- POP UP IMAGE DEBUT -->
        <h:panelGroup id="panEditImage" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.addImage == true}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.addImage == true}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.picture')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseImg" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setAddImage(false)}" 
                                             update=":panEditImage" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <h:form style="text-align: left;">
                    <p:messages showDetail="true" autoUpdate="true" />
                    <br/>
                    <h:outputText value="#{langueBean.getMsg('popup.imgSource')}" /> : <h:inputText value="#{fileBean.source}" /><br/><br/>
                    <p:fileUpload styleClass="divFileUpload" label="#{langueBean.getMsg('upOpt1')}" uploadLabel="#{langueBean.getMsg('upOpt2')}" 
                                  cancelLabel="#{langueBean.getMsg('upOpt3')}" fileUploadListener="#{fileBean.chargeImage}" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" 
                                  process="@form" update=":contenuDroite1,:panEditImage,@form"/>
                </h:form>
                <br/>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP IMAGE FIN -->

        <!-- POP UP FACETTE1 DEBUT -->
        <h:panelGroup id="panFacette" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.facette == true}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.facette == true}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.facet')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseFacette2" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setFacette(false)}" 
                                             update=":panFacette" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <fieldset style="float: left; margin-right: 10px; width: 225px; height: 120px;">
                    <legend><h:outputText value="#{langueBean.getMsg('popup.addFacet')}" /></legend>
                    <h:form>
                        <table>
                            <tr>
                                <td><h:outputText value="#{langueBean.getMsg('popup.parent')}" /> : </td>
                                <td>
                                    <p:autoComplete value="#{autoComp.selectedAtt}" completeMethod="#{autoComp.completTerm}" var="t4"
                                                    itemLabel="#{t4.termLexicalValue}" itemValue="#{t4}" converter="termConverter" forceSelection="true">
                                        <f:facet name="itemtip">
                                            <h:panelGrid columns="2" cellpadding="5" width="200" >
                                                <f:facet name="header" rendered="#{(t4.url) != null}">
                                                    <h:outputText value="ID : " />
                                                    <h:outputText value="#{t4.idConcept}" />
                                                </f:facet>

                                                <h:outputText value="#{langueBean.getMsg('autoComp1')} : " />
                                                <h:outputText value="#{t4.groupLexicalValue}" />

                                                <h:outputText value="#{langueBean.getMsg('autoComp2')} : " />
                                                <h:outputText value="#{t4.definition}" />
                                            </h:panelGrid>
                                        </f:facet>
                                    </p:autoComplete>
                                </td>
                            </tr>
                            <tr>
                                <td><h:outputText value="#{langueBean.getMsg('index.facet')}" /> : </td>
                                <td><h:inputText value="#{autoComp.facetEdit}" /></td>
                            </tr>
                        </table>
                        <br/>
                        <p:commandButton value="Créer" styleClass="styleButton" actionListener="#{autoComp.newFacette()}" update=":accordeonTree,:panFacette" />
                    </h:form>
                </fieldset>
                <fieldset style="float: right; width: 200px; height: 120px;">
                    <legend><h:outputText value="#{langueBean.getMsg('popup.delFacet')}" /></legend>
                    <h:form>
                        <h:selectOneMenu value="#{theso.idEdit}" style="margin-bottom: 4px; margin-top: 15px;" styleClass="listes" >
                            <f:selectItems value="#{theso.arrayFacette}" var="tf" itemLabel="#{tf.value}" itemValue="#{tf.key}" />
                        </h:selectOneMenu><br/><br/>
                        <p:commandButton value="#{langueBean.getMsg('popup.supp')}" actionListener="#{theso.delFacette()}" update=":accordeonTree,:panFacette" 
                                         styleClass="styleButtonRefus" />
                    </h:form>
                </fieldset>
                <div id="clean" style="margin-bottom: 10px;" />
                <fieldset style="float: left; margin-right: 10px; width: 225px; height: 160px;">
                    <legend><h:outputText value="#{langueBean.getMsg('popup.tradFacet')}" /></legend>
                    <h:form>
                        <table>
                            <tr>
                                <td><br/><h:outputText value="#{langueBean.getMsg('index.facet')}" /> : </td>
                                <td>
                                    <h:selectOneMenu value="#{theso.idEdit}" style="margin-bottom: 4px; margin-top: 15px;" styleClass="listes" >
                                        <f:selectItems value="#{theso.arrayFacette}" var="tf" itemLabel="#{tf.value}" itemValue="#{tf.key}" />
                                    </h:selectOneMenu>
                                </td>
                            </tr>
                            <tr>
                                <td><h:outputText value="#{langueBean.getMsg('language')}" /> : </td>
                                <td>
                                    <h:selectOneMenu value="#{theso.langueEdit}" styleClass="listes">
                                        <f:selectItems value="#{theso.languesTheso}"/>
                                    </h:selectOneMenu>
                                </td>
                            </tr>
                            <tr>
                                <td><h:outputText value="#{langueBean.getMsg('index.trad')}" /> : </td>
                                <td><h:inputText value="#{theso.valueEdit}" /></td>
                            </tr>
                        </table><br/>
                        <p:commandButton value="Traduire" actionListener="#{theso.tradFacette()}" update=":panFacette" styleClass="styleButton" />
                    </h:form>
                </fieldset>
                <fieldset style="float: right; width: 200px; height: 160px;">
                    <legend><h:outputText value="#{langueBean.getMsg('popup.editFacet')}" /></legend>
                    <h:form>
                        <table>
                            <tr>
                                <td><br/><h:outputText value="#{langueBean.getMsg('index.facet')}" /> : </td>
                                <td>
                                    <h:selectOneMenu value="#{theso.idEdit}" style="margin-bottom: 4px; margin-top: 15px;" styleClass="listes" >
                                        <f:selectItems value="#{theso.arrayFacette}" var="tf" itemLabel="#{tf.value}" itemValue="#{tf.key}" />
                                    </h:selectOneMenu>
                                </td>
                            </tr>
                            <tr>
                                <td><h:outputText value="#{langueBean.getMsg('popup.name')}" /> : </td>
                                <td><h:inputText value="#{theso.valueEdit}" /></td>
                            </tr>
                        </table><br/>
                        <p:commandButton value="#{langueBean.getMsg('btnEdit')}" actionListener="#{theso.updateFacette()}" update=":accordeonTree,:panFacette" styleClass="styleButton" />
                    </h:form>
                </fieldset>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP FACETTE1 FIN -->

        <!-- POP UP FACETTE2 DEBUT -->
        <h:panelGroup id="panEditFacette" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.addFacette == true}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.addFacette == true}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.facet')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseFacette" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setAddFacette(false)}" 
                                             update=":panEditFacette" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <fieldset style="float: left; margin-right: 10px;">
                    <legend><h:outputText value="#{langueBean.getMsg('popup.inc')}" /></legend>
                    <h:form>
                        <h:selectOneMenu value="#{selectedTerme.valueEdit}" style="margin-bottom: 4px; margin-top: 15px;" styleClass="listes" >
                            <f:selectItems value="#{selectedTerme.arrayFacetteInclure}" var="tf" itemLabel="#{tf.value}" itemValue="#{tf.key}" />
                        </h:selectOneMenu>
                        <br/><br/>
                        <p:commandButton value="#{langueBean.getMsg('btnAdd')}" actionListener="#{ssTree.insertNewConcept()}" update=":panEditFacette,:contenuDroite2,:accordeonTree" styleClass="styleButton" />
                    </h:form>
                </fieldset>
                <fieldset style="float: right;">
                    <legend><h:outputText value="#{langueBean.getMsg('popup.ex')}" /></legend>
                    <h:form>
                        <h:selectOneMenu value="#{selectedTerme.valueEdit}" style="margin-bottom: 4px; margin-top: 15px;" styleClass="listes" >
                            <f:selectItems value="#{selectedTerme.arrayFacette}" var="tft" itemLabel="#{tft.value}" itemValue="#{tft.key}" />
                        </h:selectOneMenu>
                        <br/><br/>
                        <p:commandButton value="#{langueBean.getMsg('popup.delFrom')}" actionListener="#{ssTree.delConcept()}" update=":panEditFacette,:contenuDroite2,:accordeonTree" styleClass="styleButton" />
                    </h:form>
                </fieldset>
                <div id="clean" style="margin-bottom: 10px;" />
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP FACETTE2 FIN -->

        <!-- POP UP TRADUCTION DEBUT -->
        <h:panelGroup id="panEditTrad" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.addTrad != 0}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.addTrad != 0}" styleClass="popUp" style="width: 250px;">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.trad')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseTrad" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setAddTrad(0)}"
                                             update=":panEditTrad" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <!-- Ajoute de traduction -->
                <h:form rendered="#{vue.addTrad == 1}">
                    <h:outputText value="#{langueBean.getMsg('popup.name')}" /> : <h:inputText id="nomTermeTrad" value="#{selectedTerme.valueEdit}" /><br/><br/>
                    <h:selectOneMenu value="#{selectedTerme.langueEdit}" styleClass="listes">
                        <f:selectItems value="#{theso.languesTheso}"/>
                    </h:selectOneMenu><br/><br/>
                    <p:commandButton id="cbAjTradTradTheso" value="#{langueBean.getMsg('btnAdd')}" actionListener="#{selectedTerme.creerTradterme()}" 
                                     update=":panEditTrad,:contenuDroite3" styleClass="styleButton"/>
                </h:form>

                <!-- Suppression de traduction-->
                <h:panelGroup rendered="#{vue.addTrad == 2}" >
                    <table id="tableRelations">
                        <tr>
                            <th><h:outputText value="#{langueBean.getMsg('index.trad')}" /></th>
                            <th></th>
                        </tr>
                        <ui:repeat value="#{selectedTerme.langues}" var="itemTrad">
                            <tr>
                                <td><h:outputText value="#{itemTrad.value} (#{itemTrad.key})" /></td>
                                <td>
                                    <h:form>
                                        <p:commandButton id="cbSuppTradCpt" styleClass="cbSupp" icon="ui-icon-supp" 
                                                         actionListener="#{selectedTerme.delTrad(itemTrad.key)}" update=":contenuDroite3,:panEditTrad">
                                            <p:confirm header="#{langueBean.getMsg('confirm')}" message="#{langueBean.getMsg('popup.valid6')}" icon="ui-icon-alert" />  
                                        </p:commandButton>  

                                        <p:confirmDialog global="true" showEffect="fade" hideEffect="explode">  
                                            <p:commandButton value="#{langueBean.getMsg('yes')}" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>  
                                            <p:commandButton value="#{langueBean.getMsg('no')}" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>       
                                        </p:confirmDialog> 
                                    </h:form>
                                </td>
                            </tr>
                        </ui:repeat>
                    </table>
                </h:panelGroup>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP TRADUCTION FIN -->
        <!-- POP UP SKOS CONCEPT DEBUT -->
        <h:panelGroup id="panCptToSkos" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.cptToSkos == true}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.cptToSkos == true}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('popup.exp')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseCptSkos" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setCptToSkos(false)}"
                                             update=":panCptToSkos" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <h:panelGroup rendered="#{selectedTerme.type != 1}">
                    <div id="textSelectCpt" onclick="selectText('thistext1')" style="padding: 5px; text-align: left; max-height: 400px; width: 550px; overflow: auto;">
                        <pre>
                            <h:outputText id="thistext1" value="#{downloadBean.conceptSkos(selectedTerme.idC, selectedTerme.idTheso).trim()}" />
                        </pre>
                    </div>
                </h:panelGroup>
                <h:panelGroup rendered="#{selectedTerme.type == 1}">
                    <div id="textSelectCpt" onclick="selectText('thistext2')" style="padding: 5px; text-align: left; max-height: 400px; width: 550px; overflow: auto;">
                        <pre>
                            <h:outputText id="thistext2" value="#{downloadBean.groupSkos(selectedTerme.idDomaine, selectedTerme.idTheso).trim()}" />
                        </pre>
                    </div>
                </h:panelGroup>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP SKOS CONCEPT FIN -->
        <!-- POP UP SKOS BRANCHE DEBUT -->
        <h:panelGroup id="panBranchToSkos" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.branchToSkos == true}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.branchToSkos == true}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('popup.exp')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseBranchSkos" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setBranchToSkos(false)}"
                                             update=":panBranchToSkos" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <div id="textSelectBranch" onclick="selectText('thistext3')"  style="padding: 5px; text-align: left; max-height: 400px; width: 550px; overflow: auto;">
                    <pre>
                        <h:outputText id="thistext3" value="#{downloadBean.skos.trim()}" />
                    </pre>
                </div>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP SKOS BRANCHE FIN -->

        <!-- POP UP DOWNLOAD SKOS BRANCHE DEBUT -->
        <h:panelGroup id="panBranchToSkosFile" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.branchToSkosFile == true}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.branchToSkosFile == true}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('popup.exp')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseBranchSkosFile" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setBranchToSkosFile(false)}"
                                             update=":panBranchToSkosFile" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <div style="padding: 10px;">
                    <h:outputText value="#{langueBean.getMsg('popup.alertSkos')}" /><br/><br/>
                    <h:form>
                        <p:commandButton value="#{langueBean.getMsg('down')}" styleClass="styleButton" ajax="false">
                            <p:fileDownload value="#{downloadBean.file}" />
                        </p:commandButton>
                    </h:form>
                </div>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP DOWNLOAD SKOS BRANCHE FIN -->
    </h:panelGroup>
</ui:composition>