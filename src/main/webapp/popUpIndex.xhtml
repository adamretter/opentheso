<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:a="http://xmlns.jcp.org/jsf/passthrough">

    <h:panelGroup id="panPopUp">
        <!-- POP UP DOMAINE DEBUT -->
        <h:panelGroup id="ajGroup" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.selectedActionDom != 0}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.selectedActionDom != 0}" styleClass="popUp" style="width: 250px;">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.btnMT')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseGroup" styleClass="cbClose" icon="ui-icon-fermer" 
                                             actionListener="#{vue.setSelectedActionDom(0)}" update=":ajGroup" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <!-- Ajout d'un domaine -->
                <h:panelGroup rendered="#{vue.selectedActionDom == 1}">
                    <fieldset>
                        <legend><h:outputText value="#{langueBean.getMsg('group.add')}" /></legend>
                        <h:form>
                            <p:messages showDetail="true" autoUpdate="true" />
                            <table>
                                <tr>
                                    <td><h:outputText value="#{langueBean.getMsg('popup.name')}" /> : </td>
                                    <td>
                                        <h:inputText id="lVDom" value="#{theso.nodeCG.lexicalValue}"/>
                                    </td>
                                </tr>           
                            </table>
                            <br/>
                            <p:commandButton id="cbAjGroupTheso" value="#{langueBean.getMsg('btnAdd')}" actionListener="#{theso.ajouterDomaine()}" 
                                             update=":ajGroup,:accordeonTree" styleClass="styleButton"/>
                        </h:form>
                    </fieldset>
                </h:panelGroup>
                

                <!-- Supprimer un domaine -->
                <h:panelGroup rendered="#{vue.selectedActionDom == 2}">
                    <fieldset>
                        <legend><h:outputText value="#{langueBean.getMsg('group.delete')}" /></legend>
                        <h:form>
                            <p:messages showDetail="true" autoUpdate="true" />
                            <table>
                                <tr>
                                    <td><h:outputText value="#{langueBean.getMsg('popup.name')}" /> : </td>
                                    <td>
                                        <h:inputText id="lVDom" value="#{theso.nodeCG.lexicalValue}"/>
                                    </td>
                                </tr>           
                            </table>
                            <br/>
                            <p:commandButton id="cbAjGroupTheso" value="#{langueBean.getMsg('btnAdd')}" actionListener="#{theso.ajouterDomaine()}" 
                                             update=":ajGroup,:accordeonTree" styleClass="styleButton"/>
                        </h:form>
                    </fieldset>
                </h:panelGroup>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP regenerate Orphan -->
        <h:panelGroup id="regenerateOrphan" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.regenerateOrphan != 0}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.regenerateOrphan != 0}" styleClass="popUp" style="width: 250px;">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.btnMT')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseGroup" styleClass="cbClose" icon="ui-icon-fermer" 
                                             actionListener="#{vue.setRegenerateOrphan(0)}" update=":regenerateOrphan" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <!-- Re génération des orphelins -->
                <h:panelGroup rendered="#{vue.regenerateOrphan == 1}">
                    <fieldset>
                        <legend><h:outputText value="#{langueBean.getMsg('tools.regenerateOrphan')}" /></legend>
                        <h:form>
                            <p:messages showDetail="true" autoUpdate="true" />
                            <table>
                                <tr>
                                    <td><h:outputText value="#{langueBean.getMsg('theso.infoRegenerationOrphan')}" /> </td>
                                </tr>           
                            </table>
                            <br/>
                            <p:commandButton id="cbGenerateOrphan" value="#{langueBean.getMsg('btnOk')}" actionListener="#{theso.regenerateOrphan()}" 
                                             update=":regenerateOrphan,:accordeonTree" styleClass="styleButton"/>
                        </h:form>
                    </fieldset>
                </h:panelGroup>
            </h:panelGroup>
        </h:panelGroup>        


        <!-- POP UP TERMES GENERIQUES DEBUT -->

        <!-- POP UP TERMES GENERIQUES FIN -->

        <!-- POP UP TERMES SPECIFIQUES DEBUT -->
 
        <!-- POP UP TERMES SPECIFIQUES FIN -->

        <!-- POP UP TERMES ASSOCIES DEBUT -->

                <!-- suppression relation -->

        <!-- POP UP TERMES ASSOCIES FIN --> 

        <!-- POP UP TERMES SYNONYMES DEBUT -->

        <!-- POP UP TERMES SYNONYMES FIN -->

        <!-- POP UP NOTE DEBUT -->
        <h:panelGroup id="panEditNote" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.addNote != 0}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.addNote != 0}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.note')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseNote" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setAddNote(0)}" 
                                             update=":panEditNote" />
                        </h:form>
                    </div>
                </div>
                <br/>

            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP NOTE FIN -->

        <!-- POP UP ALIGNEMENT DEBUT -->

        <!-- POP UP ALIGNEMENT FIN -->

        <!-- POP UP IMAGE DEBUT -->
        <h:panelGroup id="panEditImage" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.addImage == true}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.addImage == true}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.picture')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseImg" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setAddImage(false)}" 
                                             update=":panEditImage" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <h:form style="text-align: left;">
                    <p:messages showDetail="true" autoUpdate="true" />
                    <br/>
                    <h:outputText value="#{langueBean.getMsg('popup.imgSource')}" /> : <h:inputText value="#{fileBean.source}" /><br/><br/>
                    <p:fileUpload styleClass="divFileUpload" label="#{langueBean.getMsg('upOpt1')}" uploadLabel="#{langueBean.getMsg('upOpt2')}" 
                                  cancelLabel="#{langueBean.getMsg('upOpt3')}" fileUploadListener="#{fileBean.chargeImage}" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" 
                                  process="@form" update=":contenuDroite1,:panEditImage,@form"/>
                </h:form>
                <br/>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP IMAGE FIN -->

        <!-- POP UP FACETTE1 DEBUT -->
        <h:panelGroup id="panFacette" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.facette == true}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.facette == true}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.facet')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseFacette2" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setFacette(false)}" 
                                             update=":panFacette" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <fieldset style="float: left; margin-right: 10px; width: 225px; height: 120px;">
                    <legend><h:outputText value="#{langueBean.getMsg('popup.addFacet')}" /></legend>
                    <h:form>
                        <table>
                            <tr>
                                <td><h:outputText value="#{langueBean.getMsg('popup.parent')}" /> : </td>
                                <td>
                                    <p:autoComplete value="#{autoComp.selectedAtt}" completeMethod="#{autoComp.completTerm}" var="t4"
                                                    itemLabel="#{t4.termLexicalValue}" itemValue="#{t4}" converter="termConverter" forceSelection="true">
                                        <f:facet name="itemtip">
                                            <h:panelGrid columns="2" cellpadding="5" width="200" >
                                                <f:facet name="header" rendered="#{(t4.url) != null}">
                                                    <h:outputText value="ID : " />
                                                    <h:outputText value="#{t4.idConcept}" />
                                                </f:facet>

                                                <h:outputText value="#{langueBean.getMsg('autoComp1')} : " />
                                                <h:outputText value="#{t4.groupLexicalValue}" />

                                                <h:outputText value="#{langueBean.getMsg('autoComp2')} : " />
                                                <h:outputText value="#{t4.definition}" />
                                            </h:panelGrid>
                                        </f:facet>
                                    </p:autoComplete>
                                </td>
                            </tr>
                            <tr>
                                <td><h:outputText value="#{langueBean.getMsg('index.facet')}" /> : </td>
                                <td><h:inputText value="#{autoComp.facetEdit}" /></td>
                            </tr>
                        </table>
                        <br/>
                        <p:commandButton value="Créer" styleClass="styleButton" actionListener="#{autoComp.newFacette()}" update=":accordeonTree,:panFacette" />
                    </h:form>
                </fieldset>
                <fieldset style="float: right; width: 200px; height: 120px;">
                    <legend><h:outputText value="#{langueBean.getMsg('popup.delFacet')}" /></legend>
                    <h:form>
                        <h:selectOneMenu value="#{theso.idEdit}" style="margin-bottom: 4px; margin-top: 15px;" styleClass="listes" >
                            <f:selectItems value="#{theso.arrayFacette}" var="tf" itemLabel="#{tf.value}" itemValue="#{tf.key}" />
                        </h:selectOneMenu><br/><br/>
                        <p:commandButton value="#{langueBean.getMsg('popup.supp')}" actionListener="#{theso.delFacette()}" update=":accordeonTree,:panFacette" 
                                         styleClass="styleButtonRefus" />
                    </h:form>
                </fieldset>
                <div id="clean" style="margin-bottom: 10px;" />
                <fieldset style="float: left; margin-right: 10px; width: 225px; height: 160px;">
                    <legend><h:outputText value="#{langueBean.getMsg('popup.tradFacet')}" /></legend>
                    <h:form>
                        <table>
                            <tr>
                                <td><br/><h:outputText value="#{langueBean.getMsg('index.facet')}" /> : </td>
                                <td>
                                    <h:selectOneMenu value="#{theso.idEdit}" style="margin-bottom: 4px; margin-top: 15px;" styleClass="listes" >
                                        <f:selectItems value="#{theso.arrayFacette}" var="tf" itemLabel="#{tf.value}" itemValue="#{tf.key}" />
                                    </h:selectOneMenu>
                                </td>
                            </tr>
                            <tr>
                                <td><h:outputText value="#{langueBean.getMsg('language')}" /> : </td>
                                <td>
                                    <h:selectOneMenu value="#{theso.langueEdit}" styleClass="listes">
                                        <f:selectItems value="#{theso.languesTheso}"/>
                                    </h:selectOneMenu>
                                </td>
                            </tr>
                            <tr>
                                <td><h:outputText value="#{langueBean.getMsg('index.trad')}" /> : </td>
                                <td><h:inputText value="#{theso.valueEdit}" /></td>
                            </tr>
                        </table><br/>
                        <p:commandButton value="Traduire" actionListener="#{theso.tradFacette()}" update=":panFacette" styleClass="styleButton" />
                    </h:form>
                </fieldset>
                <fieldset style="float: right; width: 200px; height: 160px;">
                    <legend><h:outputText value="#{langueBean.getMsg('popup.editFacet')}" /></legend>
                    <h:form>
                        <table>
                            <tr>
                                <td><br/><h:outputText value="#{langueBean.getMsg('index.facet')}" /> : </td>
                                <td>
                                    <h:selectOneMenu value="#{theso.idEdit}" style="margin-bottom: 4px; margin-top: 15px;" styleClass="listes" >
                                        <f:selectItems value="#{theso.arrayFacette}" var="tf" itemLabel="#{tf.value}" itemValue="#{tf.key}" />
                                    </h:selectOneMenu>
                                </td>
                            </tr>
                            <tr>
                                <td><h:outputText value="#{langueBean.getMsg('popup.name')}" /> : </td>
                                <td><h:inputText value="#{theso.valueEdit}" /></td>
                            </tr>
                        </table><br/>
                        <p:commandButton value="#{langueBean.getMsg('btnEdit')}" actionListener="#{theso.updateFacette()}" update=":accordeonTree,:panFacette" styleClass="styleButton" />
                    </h:form>
                </fieldset>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP FACETTE1 FIN -->

        <!-- POP UP FACETTE2 DEBUT -->
        <h:panelGroup id="panEditFacette" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.addFacette == true}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.addFacette == true}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('index.facet')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseFacette" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setAddFacette(false)}" 
                                             update=":panEditFacette" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <fieldset style="float: left; margin-right: 10px;">
                    <legend><h:outputText value="#{langueBean.getMsg('popup.inc')}" /></legend>
                    <h:form>
                        <h:selectOneMenu value="#{selectedTerme.valueEdit}" style="margin-bottom: 4px; margin-top: 15px;" styleClass="listes" >
                            <f:selectItems value="#{selectedTerme.arrayFacetteInclure}" var="tf" itemLabel="#{tf.value}" itemValue="#{tf.key}" />
                        </h:selectOneMenu>
                        <br/><br/>
                        <p:commandButton value="#{langueBean.getMsg('btnAdd')}" actionListener="#{ssTree.insertNewConcept()}" update=":panEditFacette,:contenuDroite2,:accordeonTree" styleClass="styleButton" />
                    </h:form>
                </fieldset>
                <fieldset style="float: right;">
                    <legend><h:outputText value="#{langueBean.getMsg('popup.ex')}" /></legend>
                    <h:form>
                        <h:selectOneMenu value="#{selectedTerme.valueEdit}" style="margin-bottom: 4px; margin-top: 15px;" styleClass="listes" >
                            <f:selectItems value="#{selectedTerme.arrayFacette}" var="tft" itemLabel="#{tft.value}" itemValue="#{tft.key}" />
                        </h:selectOneMenu>
                        <br/><br/>
                        <p:commandButton value="#{langueBean.getMsg('popup.delFrom')}" actionListener="#{ssTree.delConcept()}" update=":panEditFacette,:contenuDroite2,:accordeonTree" styleClass="styleButton" />
                    </h:form>
                </fieldset>
                <div id="clean" style="margin-bottom: 10px;" />
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP FACETTE2 FIN -->

        <!-- POP UP TRADUCTION DEBUT -->

                <!-- Ajoute de traduction -->

                <!-- Suppression de traduction-->

        <!-- POP UP TRADUCTION FIN -->
        <!-- POP UP SKOS CONCEPT DEBUT -->
        <h:panelGroup id="panCptToSkos" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.cptToSkos == true}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.cptToSkos == true}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('popup.exp')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseCptSkos" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setCptToSkos(false)}"
                                             update=":panCptToSkos" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <h:panelGroup rendered="#{selectedTerme.type != 1}">
                    <div id="textSelectCpt" onclick="selectText('thistext1')" style="padding: 5px; text-align: left; max-height: 400px; width: 550px; overflow: auto;">
                        <pre>
                            <h:outputText id="thistext1" value="#{downloadBean.conceptSkos(selectedTerme.idC, selectedTerme.idTheso).trim()}" />
                        </pre>
                    </div>
                </h:panelGroup>
                <h:panelGroup rendered="#{selectedTerme.type == 1}">
                    <div id="textSelectCpt" onclick="selectText('thistext2')" style="padding: 5px; text-align: left; max-height: 400px; width: 550px; overflow: auto;">
                        <pre>
                            <h:outputText id="thistext2" value="#{downloadBean.groupSkos(selectedTerme.idDomaine, selectedTerme.idTheso).trim()}" />
                        </pre>
                    </div>
                </h:panelGroup>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP SKOS CONCEPT FIN -->
        <!-- POP UP SKOS BRANCHE DEBUT -->
        <h:panelGroup id="panBranchToSkos" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.branchToSkos == true}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.branchToSkos == true}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('popup.exp')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseBranchSkos" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setBranchToSkos(false)}"
                                             update=":panBranchToSkos" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <div id="textSelectBranch" onclick="selectText('thistext3')"  style="padding: 5px; text-align: left; max-height: 400px; width: 550px; overflow: auto;">
                    <pre>
                        <h:outputText id="thistext3" value="#{downloadBean.skos.trim()}" />
                    </pre>
                </div>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP SKOS BRANCHE FIN -->

        <!-- POP UP DOWNLOAD SKOS BRANCHE DEBUT -->
        <h:panelGroup id="panBranchToSkosFile" style="background: transparent; box-shadow: none;">
            <h:panelGroup rendered="#{vue.branchToSkosFile == true}" styleClass="overlay" />
            <h:panelGroup rendered="#{vue.branchToSkosFile == true}" styleClass="popUp">
                <div id="titreAllEdit">
                    <h:outputText value="#{langueBean.getMsg('popup.exp')}" />
                    <div id="divClose">
                        <h:form>
                            <p:commandButton id="cbCloseBranchSkosFile" styleClass="cbClose" icon="ui-icon-fermer" actionListener="#{vue.setBranchToSkosFile(false)}"
                                             update=":panBranchToSkosFile" />
                        </h:form>
                    </div>
                </div>
                <br/>
                <div style="padding: 10px;">
                    <h:outputText value="#{langueBean.getMsg('popup.alertSkos')}" /><br/><br/>
                    <h:form>
                        <p:commandButton value="#{langueBean.getMsg('down')}" styleClass="styleButton" ajax="false">
                            <p:fileDownload value="#{downloadBean.file}" />
                        </p:commandButton>
                    </h:form>
                </div>
            </h:panelGroup>
        </h:panelGroup>
        <!-- POP UP DOWNLOAD SKOS BRANCHE FIN -->
    </h:panelGroup>
</ui:composition>