<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:p="http://primefaces.org/ui">

    <p:dialog id="idGpsEditDlg"  header="gps" widgetVar="gpsEditDlg" modal="true" resizable="false" >
        <script type="text/javascript">
            function geocode() {
                PF('geoMap').geocode(document.getElementById('address').value);
            }
        </script>
        <h:form prependId="false">
            <h:panelGrid columns="3" style="margin-bottom:10px" cellpadding="5">
                <p:outputLabel for="address" value="Address:" />
                <p:inputText id="address" value="#{selectedTerme.nom}"  />
                <p:commandButton value="Geocode" icon="ui-icon-search"  onclick="geocode()" type="button" />
            </h:panelGrid>
            <p:gmap id="geoGmap" widgetVar="geoMap" center="#{gps.centerGeoMap}" zoom="15" 
                    type="ROADMAP" model="#{gps.geoModel}" style="width:100%;height:300px">
                <p:ajax event="geocode" listener="#{gps.onGeocode}" update="@this" />
            </p:gmap>
            <p:commandButton id="addCoordinate" actionListener="#{gps.addCoordinates(selectedTerme.idC, selectedTerme.idTheso)}" styleClass="cbEdit" 
                             icon="ui-icon-edit" action="#{selectedTerme.updateGps()}" oncomplete="PF('gpsEditDlg').hide();" update=":panContenu" immediate="true"/>

            <p:commandButton value="test" id="addCoordinate2" action="#{gps.test()}"  
                              update=":panContenu" immediate="true"/>
                </h:form>
    </p:dialog>
</ui:composition>