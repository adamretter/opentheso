<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
    xmlns:p="http://primefaces.org/ui">
    
    <div id="divArbreTheso">
        <h:panelGroup id="panelTree">
            
            
            <h:form>
                <h:panelGrid columns="3">
                    <h:outputText value="Keyup: " />
                    <p:inputText id="counter" value="#{treeBean.test}">
                        <p:ajax event="keyup" update="out" listener="#{treeBean.handleKeyEvent}" />
                    </p:inputText>
                    <h:outputText id="out" value="#{treeBean.connect.poolConnexion}" />
                </h:panelGrid>
            </h:form>

            
            
            <h:outputText value="test" title="#{treeBean.selectedNode.rowKey}" />
            <h:form id="form">
                
                <p:tree id="tree" styleClass="styleTree" value="#{treeBean.root}" var="node" dynamic="true" cache="true" 
                        selectionMode="single"  selection="#{treeBean.selectedNode}" animate="true" >
                    <p:ajax event="expand" listener="#{treeBean.onNodeExpand}" />  
                    <p:ajax event="select" 
                            update=":panContenu,:contenuDroite1,:contenuDroite2,:contenuDroite3" 
                            listener="#{treeBean.onNodeSelect}" />
            
                    <p:treeNode type="domaine" expandedIcon="ui-icon ui-icon-domaine-open" 
                                collapsedIcon="ui-icon ui-icon-domaine-close">  
                        <h:outputText value="#{node}"/>  
                    </p:treeNode>  
                    <p:treeNode type="dossier" expandedIcon="ui-icon ui-icon-dossier-open" 
                                collapsedIcon="ui-icon ui-icon-dossier-close">  
                        <h:outputText value="#{node}"/>  
                    </p:treeNode>  
                    <p:treeNode type="fichier" icon="ui-icon ui-icon-fichier">  
                        <h:outputText value="#{node}"/>  
                    </p:treeNode> 
                    <p:treeNode type="hidden" icon="ui-icon ui-icon-hidden">  
                        <h:outputText value="#{node}"/>  
                    </p:treeNode> 
                    <p:treeNode type="orphan" expandedIcon="ui-icon ui-icon-domaine-open" 
                                collapsedIcon="ui-icon ui-icon-domaine-close">  
                        <h:outputText value="#{node}"/>  
                    </p:treeNode>
                    
                </p:tree>

            </h:form>
        </h:panelGroup>
    </div>
</ui:composition>
